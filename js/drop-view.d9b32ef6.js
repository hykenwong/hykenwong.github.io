(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["drop-view"],{"13d5":function(t,e,a){"use strict";var n=a("23e7"),r=a("d58f").left,i=a("a640"),o=a("ae40"),s=a("2d00"),c=a("605d"),l=i("reduce"),u=o("reduce",{1:0}),d=!c&&s>79&&s<83;n({target:"Array",proto:!0,forced:!l||!u||d},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1d08":function(t,e,a){"use strict";a("f3d6")},"208d":function(t,e,a){"use strict";a("b0c0"),a("ac1f"),a("5319"),a("1276"),a("2ca0");e["a"]={shouldRender:function(t,e){var a=e.rank.toLowerCase();if(!t.grades[a])return!1;var n=e.level;return!(n<t.minLevel||n>t.maxLevel)&&!!this.nameMatch(t.nameSearch,e.name.name)},nameMatch:function(t,e){if(!t)return!0;t=t.toLowerCase(),e=e.toLowerCase().replace(/[^a-z0-9]/g," ");for(var a=t.split(/\s+/g),n=e.split(/\s+/g),r=0,i=0;i<a.length;++i){var o=a[i];if(o){for(var s=!1,c=r;c<n.length;++c){var l=n[c];if(l&&l.startsWith(o)){s=!0,r=c;break}}if(!s)return!1}}return!0},defaultFilter:function(){return{minLevel:0,maxLevel:100,nameSearch:"",selectClass:"",grades:{normal:!0,magic:!0,rare:!0,epic:!0,unique:!0,legendary:!0,divine:!0,ancient:!0},type:{weapon:!0,parts:!0,crest:!0,dragonGem:!0,talisman:!0,fairy:!0,wtd:!0,source:!0,buff:!0,vehicle:!0,mercenary:!0}}}}},2909:function(t,e,a){"use strict";var n=a("6b75");function r(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||i(t)||Object(o["a"])(t)||s()}a.d(e,"a",(function(){return c}))},"3b64":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("4160"),a("a9e3"),a("3ca3"),a("159b"),a("ddb0");var n=a("2909"),r=(a("96cf"),a("1da1")),i=a("d4ec"),o=a("bee2"),s=a("6fd2"),c=a("6ebb"),l=1e9,u=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"getItemCharmRequiredKeys",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,i,o,l,u,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(s["a"])(a),t.next=3,c["a"].getTableRowsMatching("charmitemkeytable","_CharmItemID","eq",e,a);case 3:if(n=t.sent,!(n.length>0)){t.next=13;break}for(r=n[0],i=function(t){return"_Key".concat(t)},o=function(t){return"_Key".concat(t,"cost")},l=[],u=1;u<=5;++u)d=Number(r[i(u)]),p=Number(r[o(u)]),d&&p&&l.push([d,p]);return t.abrupt("return",l);case 13:return t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getItemDrop",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r,i,o,u,d,p,f,m=this,v=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=v.length>2&&void 0!==v[2]?v[2]:0,!(r>=5)){t.next=3;break}return t.abrupt("return",[]);case 3:return a=Object(s["a"])(a),t.next=6,c["a"].getTableRow("itemdroptable",e,a);case 6:i=t.sent,o=0,u=[],d=regeneratorRuntime.mark((function t(e){var s,c,d,p,f,v,h,_,g,y,b,D;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s="_IsGroup".concat(e),c="_Item".concat(e,"Index"),d="_Item".concat(e,"Info"),p="_Item".concat(e,"Prob"),f=i[s],v=i[c],h=i[d],_=i[p],!(v<=0||_<=0||!f&&h<=0)){t.next=10;break}return t.abrupt("return","continue");case 10:if(g=o,o+=_,y=_/l,b=g>=l||void 0,!f){t.next=28;break}return t.prev=15,t.next=18,m.getItemDrop(v,a,r+1);case 18:D=t.sent,D.forEach((function(t){t.rate*=b?0:y,t.prob*=y,t.isOverProb=b})),u.push.apply(u,Object(n["a"])(D)),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](15),u.push({count:h,cutoff:g,itemId:-1,rate:b?0:y,prob:_,isOverProb:b,depth:r});case 26:t.next=29;break;case 28:u.push({count:h,cutoff:g,itemId:v,rate:b?0:y,prob:_,isOverProb:b,depth:r});case 29:case"end":return t.stop()}}),t,null,[[15,23]])})),p=1;case 11:if(!(p<=20)){t.next=19;break}return t.delegateYield(d(p),"t0",13);case 13:if(f=t.t0,"continue"!==f){t.next=16;break}return t.abrupt("continue",16);case 16:++p,t.next=11;break;case 19:return t.abrupt("return",u);case 20:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()}]),t}();e["b"]=new u},"3c56":function(t,e,a){},"43f9":function(t,e,a){"use strict";a("3c56")},"53d4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-list",attrs:{long:t.isLong}},[t._t("default"),0===t.count?t._t("empty",[t._m(0)]):t._e()],2)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"empty"},[a("span",{staticClass:"desc"},[t._v("列表里无任何物品")])])}],i=(a("a9e3"),a("2b0e")),o=i["a"].extend({props:{count:{type:Number}},computed:{isLong:function(){return this.count>6}}}),s=o,c=(a("de79"),a("2877")),l=Object(c["a"])(s,n,r,!1,null,"a4b37af2",null);e["a"]=l.exports},5713:function(t,e,a){t.exports=a.p+"img/open.2018282d.svg"},"5d26":function(t,e,a){"use strict";a("b9aa")},"6a4b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"itemdrop"},[t.loading?a("div",{staticClass:"loading"},[a("load-indicator",{attrs:{loadText:"正在加载掉落"}})],1):t._e(),t.error?a("div",{staticClass:"error"},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.drops?a("div",[a("responsive-card-list",{attrs:{count:t.drops.length}},[t._l(t.drops,(function(t,e){return a("responsive-card-list-entry",{key:e},[a("item-card",{class:{over:t.isOverProb},attrs:{itemId:t.itemId,count:t.count,rate:t.rate}})],1)})),t.nothingChance>0?a("responsive-card-list-entry",[a("div",{staticClass:"nothing-card"},[a("div",{staticClass:"head"},[t._v(t._s(t._f("percent")(t.nothingChance))+"% 概率无掉落")])])]):t._e()],2)],1):t._e()])},r=[],i=(a("13d5"),a("a9e3"),a("96cf"),a("1da1")),o=a("2b0e"),s=a("53d4"),c=a("b461"),l=a("3b64"),u=o["a"].extend({components:{ResponsiveCardList:s["a"],ResponsiveCardListEntry:c["a"]},props:{dropId:{type:Number}},data:function(){return{loading:!1,drops:[],error:""}},watch:{dropId:function(){this.load()}},computed:{nothingChance:function(){if(this.loading)return 0;var t=this.drops.reduce((function(t,e){return e.prob+t}),0);if(t<l["a"]){var e=l["a"]-t;return e/l["a"]}return 0}},mounted:function(){this.load()},methods:{load:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,t.error="",t.drops=[],e.next=6,l["b"].getItemDrop(t.dropId);case 6:t.drops=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.error=String(e.t0);case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))()}}}),d=u,p=(a("1d08"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"3093525c",null);e["a"]=f.exports},"6ac4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-toolkit-index"},[a("go-back"),a("div",{staticClass:"kit-list"},[t.loading?a("div",[a("load-indicator",{attrs:{loadText:"正在加载中"}})],1):t._e(),1==t.routeName?[t.indexData?a("div",t._l(t.indexData.Dungeon,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:2==t.routeName?[t.indexData?a("div",t._l(t.indexData.requestBoard,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:3==t.routeName?[t.indexData?a("div",t._l(t.indexData.week,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:4==t.routeName?[t.indexData?a("div",t._l(t.indexData.special,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:5==t.routeName?[t.indexData?a("div",t._l(t.indexData.balance,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:6==t.routeName?[t.indexData?a("div",t._l(t.indexData.event,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:7==t.routeName?[t.indexData?a("div",t._l(t.indexData.dragon,(function(e,n){return a("div",{key:n},[t._v(" "+t._s(e.name)+"： "),t._l(e.children,(function(e,n){return a("span",{key:n},[1==e.type?[a("button",{on:{click:function(a){return t.ShowDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:2==e.type?[a("button",{staticClass:"gold-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:3==e.type?[a("button",{staticClass:"sliver-box",on:{click:function(a){return t.ClearDrops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:4==e.type?[a("button",{on:{click:function(a){return t.Drops(e.id,e.displayName)}}},[t._v(t._s(e.buttonName))])]:t._e()],2)}))],2)})),0):t._e()]:t._e(),0!=t.dropGroupId||0!=t.stageclearDropId?[a("item-drop-group",{attrs:{dropGroupId:t.dropGroupId,displayName:t.displayName,stageClearDropId:t.stageclearDropId}})]:t._e(),0!=t.dropId?[a("item-drop-list",{attrs:{dropId:t.dropId}})]:t._e()],2)],1)},r=[],i=(a("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"itemdropgroup"},[t.loading?n("div",{staticClass:"loading"},[n("load-indicator",{attrs:{loadText:"加载基础奖励"}})],1):t._e(),this.displayName?n("h3",[t._v(t._s(this.displayName))]):t._e(),t.floors.length>0?[n("div",{staticStyle:{margin:"10px 0"}},[t._v(" 请选择楼层掉落 "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.floorSelected,expression:"floorSelected"}],ref:"floorNum",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.floorSelected=e.target.multiple?a:a[0]},t.watchChange]}},[n("option",{attrs:{value:"",selected:"",disabled:"",hidden:""}}),t._l(t.floors,(function(e,a){return n("option",{key:a,domProps:{value:e}},[t._v(t._s(t._f("floorName")(e)))])}))],2)])]:t._e(),t.groups?n("div",{directives:[{name:"show",rawName:"v-show",value:t.groups[0].entries.length>0,expression:"groups[0].entries.length > 0"}],staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"drop-title"},[n("h4",[t._v("基础掉落")]),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isOpenBaseDrop,expression:"isOpenBaseDrop"}],attrs:{src:a("5713"),alt:""},on:{click:function(e){t.isOpenBaseDrop=!t.isOpenBaseDrop}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!t.isOpenBaseDrop,expression:"!isOpenBaseDrop"}],attrs:{src:a("bf37"),alt:""},on:{click:function(e){t.isOpenBaseDrop=!t.isOpenBaseDrop}}})]),n("collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenBaseDrop,expression:"isOpenBaseDrop"}],staticClass:"group-list"},t._l(t.groups,(function(e){return n("div",{key:e.difficulty,staticClass:"group-entry"},[n("div",{staticClass:"drop-entry-list"},t._l(e.entries,(function(e,a){return n("div",{key:a,staticClass:"drop-entry"},[n("p",[e.expectation>=1?n("span",[t._v(" 掉落"),n("strong",[t._v(t._s(Math.floor(e.expectation))+"x")]),e.expectation!=Math.floor(e.expectation)?n("span",[t._v(" + "),n("strong",[t._v(t._s(t._f("rate")(e.expectation-Math.floor(e.expectation)))+"%")]),t._v(" 概率额外掉落 ")]):t._e()]):n("span",[n("strong",[t._v(t._s(t._f("rate")(e.expectation))+"%")]),t._v("掉落 ")]),n("span",{staticClass:"iid"},[t._v("#"+t._s(e.dropId))]),1==e.ftg?n("span",{staticClass:"ftg-boost"},[t._v("支持疲劳值燃烧效果")]):t._e(),0==e.PropertyDrop?n("span",{staticClass:"property-drop"},[t._v("队伍需roll")]):t._e()]),n("div",{staticClass:"item-list"},t._l(e.items,(function(t,e){return n("div",{key:e,staticClass:"entry"},[n("item-card",{attrs:{itemId:t.item.id,itemStub:t.item,count:t.count,timeLimit:t.durationDays,goldAmt:t.gold/1e4,rate:t.rate}})],1)})),0)])})),0)])})),0)])],1):t._e(),n("div",[t.exloading?n("div",{staticClass:"loading"},[n("load-indicator",{attrs:{loadText:"层数加载"}})],1):t._e(),t.floorGroups?n("div",[n("div",{staticClass:"drop-title"},[n("h4",[t._v("层数掉落")]),n("img",{directives:[{name:"show",rawName:"v-show",value:t.isOpenFloorDrop,expression:"isOpenFloorDrop"}],attrs:{src:a("5713"),alt:""},on:{click:function(e){t.isOpenFloorDrop=!t.isOpenFloorDrop}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!t.isOpenFloorDrop,expression:"!isOpenFloorDrop"}],attrs:{src:a("bf37"),alt:""},on:{click:function(e){t.isOpenFloorDrop=!t.isOpenFloorDrop}}})]),n("collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenFloorDrop,expression:"isOpenFloorDrop"}],staticClass:"group-list"},t._l(t.floorGroups,(function(e){return n("div",{key:e.difficulty,staticClass:"group-entry"},[n("div",{staticClass:"drop-entry-list"},t._l(e.entries,(function(e,a){return n("div",{key:a,staticClass:"drop-entry"},[n("p",[n("b",[t._v(t._s(e.difficulty))]),e.expectation>=1?n("span",[t._v(" 掉落"),n("strong",[t._v(t._s(Math.floor(e.expectation))+"x")]),e.expectation!=Math.floor(e.expectation)?n("span",[t._v(" + "),n("strong",[t._v(t._s(t._f("rate")(e.expectation-Math.floor(e.expectation)))+"%")]),t._v(" 概率额外掉落 ")]):t._e()]):n("span",[n("strong",[t._v(t._s(t._f("rate")(e.expectation))+"%")]),t._v("掉落 ")]),n("span",{staticClass:"iid"},[t._v("#"+t._s(e.dropId))]),1==e.ftg?n("span",{staticClass:"ftg-boost"},[t._v("支持疲劳值燃烧效果")]):t._e(),0==e.PropertyDrop?n("span",{staticClass:"property-drop"},[t._v("队伍需roll")]):t._e()]),n("div",{staticClass:"item-list"},t._l(e.items,(function(t,e){return n("div",{key:e,staticClass:"entry"},[n("item-card",{attrs:{itemId:t.item.id,itemStub:t.item,count:t.count,timeLimit:t.durationDays,goldAmt:t.gold/1e4,rate:t.rate}})],1)})),0)])})),0)])})),0)])],1):t._e()]),t.error?n("div",[t._v(" "+t._s(t.error)+" ")]):t._e()],2)}),o=[],s=(a("d3b7"),a("25f0"),a("ddb0"),a("2b0e")),c=a("5489"),l=a("f62c"),u=a("7ea2"),d=(a("ae0c"),a("6a4b")),p=a("5a8f"),f=a("208d"),m="0.3s height ease-in-out, 0.3s padding-top ease-in-out, 0.3s padding-bottom ease-in-out",v={"before-enter":function(t){t.style.transition=m,t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0},enter:function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},"after-enter":function(t){t.style.transition="",t.style.height="",t.style.overflow=t.dataset.oldOverflow},"before-leave":function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},leave:function(t){0!==t.scrollHeight&&(t.style.transition=m,t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},"after-leave":function(t){t.style.transition="",t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}},h={name:"collapseTransition",functional:!0,render:function(t,e){var a=e.children,n={on:v};return t("transition",n,a)}};s["a"].component("item-icon",c["a"]),s["a"].component("item-drop-list",d["a"]),s["a"].component("item-icon-tooltip",l["a"]),s["a"].component("item-card",u["a"]);var _={props:["dropGroupId","displayName","stageClearDropId"],name:"item-drop-group",components:{collapseTransition:h},data:function(){return{loading:!0,groups:null,error:null,filter:f["a"].defaultFilter(),floorGroups:null,exDifficulty:0,exloading:!1,floors:[],floorSelected:"",isOpenBaseDrop:!0,isOpenFloorDrop:!0,cacheArray:[]}},created:function(){0!=this.dropGroupId&&this.fetchData(),0!=this.stageClearDropId&&this.stageClear()},watch:{dropGroupId:function(t){this.isOpenBaseDrop=!0,this.dropGroupId=t,this.floorSelected="",this.exDifficulty=0,this.fetchData()},stageClearDropId:function(t){this.isOpenBaseDrop=!0,this.stageClearDropId=t,this.floorSelected="",this.exDifficulty=0,this.stageClear()}},filters:{floorName:function(t){switch(t){case 4:return"深渊";case 3:return"大师";case 2:return"困难";case 1:return"普通";case 0:return"简单";default:return t-4}}},methods:{fetchData:function(){var t=this;if(this.error=null,this.groups=null,this.floorGroups=null,this.dropGroupId){var e=this.exDifficulty.toString()+this.dropGroupId.toString();if(this.loading=!0,this.cacheArray[e]){this.isOpenBaseDrop=!0;var a=this.cacheArray[e];return this.groups=a,this.loading=!1,this.error=null,this.floors=a.floors,void(0==a[0].entries.length&&a.floors.length>0&&(this.selectFloor(a.floors[0]),this.floorSelected=a.floors[0]))}p["a"].getItemDropGroup(this.dropGroupId,this.exDifficulty,this.$store.state.regionCode,(function(a){t.groups=a,t.loading=!1,t.error=null,t.floors=a.floors,t.cacheArray[e]=a,0==a[0].entries.length&&a.floors.length>0&&(t.selectFloor(a.floors[0]),t.floorSelected=a.floors[0])}),(function(e){t.loading=!1,t.error=e}))}else this.loading=!1},stageClear:function(){var t=this;if(this.error=null,this.groups=null,this.floorGroups=null,this.stageClearDropId){var e=this.exDifficulty.toString()+this.stageClearDropId.toString();if(this.loading=!0,this.cacheArray[e]){var a=this.cacheArray[e];return this.groups=a,this.loading=!1,this.error=null,this.floors=a.floors,void(0==a[0].entries.length&&a.floors.length>0&&(this.selectFloor(a.floors[0]),this.floorSelected=a.floors[0]))}p["a"].getStageClearDrop(this.stageClearDropId,this.exDifficulty,this.$store.state.regionCode,(function(a){t.groups=a,t.loading=!1,t.error=null,t.floors=a.floors,t.cacheArray[e]=a,0==a[0].entries.length&&a.floors.length>0&&(t.selectFloor(a.floors[0]),t.floorSelected=a.floors[0])}),(function(e){t.loading=!1,t.error=e}))}else this.loading=!1},watchChange:function(t){this.selectFloor(t.target.value),this.isOpenBaseDrop=!1,this.isOpenFloorDrop=!0},selectFloor:function(t){var e=this;if(this.dropGroupId||this.stageClearDropId)if(this.exDifficulty=t,this.error=null,this.floorGroups=null,this.exDifficulty)if(0!=this.dropGroupId){this.exloading=!0;var a=this.exDifficulty.toString()+this.dropGroupId.toString();if(this.cacheArray[a]){var n=this.cacheArray[a];return this.floorGroups=n,this.exloading=!1,void(this.error=null)}p["a"].getItemDropGroup(this.dropGroupId,this.exDifficulty,this.$store.state.regionCode,(function(t){e.floorGroups=t,e.cacheArray[a]=t,e.exloading=!1,e.error=null}),(function(t){e.exloading=!1,e.error=t}))}else{this.exloading=!0,this.groups=null;var r=this.exDifficulty.toString()+this.stageClearDropId.toString();if(this.cacheArray[r]){var i=this.cacheArray[r];return this.floorGroups=i,this.exloading=!1,void(this.error=null)}p["a"].getStageClearDrop(this.stageClearDropId,this.exDifficulty,this.$store.state.regionCode,(function(t){e.floorGroups=t,e.cacheArray[r]=t,e.exloading=!1,e.error=null}),(function(t){e.exloading=!1,e.error=t}))}else this.exloading=!1}}},g=_,y=(a("43f9"),a("2877")),b=Object(y["a"])(g,i,o,!1,null,"6ad94498",null),D=b.exports,x=a("e3c0"),C=a("27c7"),k={cache:{dropIndex:""},getDropIndex:function(t,e){var a=this;""==this.cache.dropIndex?C["a"].get("dropIndex.php?lan=cn",{}).then((function(e){a.cache.dropIndex=e.data,t(e.data)}),e):t(this.cache.dropIndex)}},w={components:{ItemDropGroup:D,GoBack:x["a"],ItemDropList:d["a"]},computed:{routeName:function(){switch(this.$route.name){case"item-drop-dungeon":return 1;case"item-drop-requestBorard":return 2;case"item-drop-weekDungeon":return 3;case"item-drop-specialDungeon":return 4;case"item-drop-balanceDungeon":return 5;case"item-drop-eventDungeon":return 6;case"item-drop-dragon":return 7;default:break}}},data:function(){return{dropGroupId:0,displayName:"",floorArray:[],stageclearDropId:0,dropId:0,indexData:null,loading:!0}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;k.getDropIndex((function(e){t.indexData=e,t.loading=!1}),(function(t){console.log(t)}))},ShowDrops:function(t,e){this.dropId=0,this.stageclearDropId=0,this.dropGroupId=t,this.displayName=e},ClearDrops:function(t,e){this.dropId=0,this.dropGroupId=0,this.stageclearDropId=t,this.displayName=e},Drops:function(t,e){this.dropId=t,this.stageclearDropId=0,this.dropGroupId=0,this.displayName=e}}},I=w,N=(a("c913"),Object(y["a"])(I,n,r,!1,null,"790234c8",null));e["default"]=N.exports},"6ebb":function(t,e,a){"use strict";a("99af"),a("a15b"),a("96cf");var n=a("1da1"),r=a("d4ec"),i=a("bee2"),o=a("27c7"),s=a("3a0b"),c=function(){function t(){Object(r["a"])(this,t)}return Object(i["a"])(t,[{key:"getTableSchema",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this._ensureRegion(a),t.next=3,o["a"].get("/server/".concat(a,"/tables/").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getTableRow",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a,n,r){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this._ensureRegion(n),t.next=3,o["a"].get("table.php?lan=".concat(n,"&id=").concat(a,"&table=").concat(e),{});case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a,n,r){return t.apply(this,arguments)}return e}()},{key:"getTableRows",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a,n,r){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this._ensureRegion(n),t.next=3,o["a"].get("/server/".concat(n,"/tables/").concat(e,"/").concat(a.join(",")),{params:{uiresolve:r&&r.uiresolve?r.uiresolve.join(","):void 0,fileresolve:r&&r.fileresolve?r.fileresolve.join(","):void 0,select:r&&r.select?r.select.join(","):void 0,limit:r&&r.limit?r.limit:void 0}});case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a,n,r){return t.apply(this,arguments)}return e}()},{key:"getTableRowIdsMatching",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a,n,r,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this._ensureRegion(i),t.next=3,o["a"].get("/server/".concat(i,"/tables/").concat(e,"/columns/").concat(a,"/").concat(n,"/").concat(r));case 3:return s=t.sent,t.abrupt("return",s.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a,n,r,i){return t.apply(this,arguments)}return e}()},{key:"getTableRowsMatching",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a,n,r,i,s){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this._ensureRegion(i),t.next=3,o["a"].get("/table.php?lan=".concat(i,"&id=").concat(r,"&table=").concat(e),{params:{uiresolve:s&&s.uiresolve?s.uiresolve.join(","):void 0,fileresolve:s&&s.fileresolve?s.fileresolve.join(","):void 0,select:s&&s.select?s.select.join(","):void 0,limit:s&&s.limit?s.limit:void 0}});case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a,n,r,i,o){return t.apply(this,arguments)}return e}()},{key:"getTable",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:9e3,a=this._ensureRegion(a),t.next=4,o["a"].get("/server/".concat(a,"/tables/").concat(e),{params:{limit:n}});case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"_ensureRegion",value:function(t){return t||s["a"].state.regionCode}}]),t}();e["a"]=new c},"6fd2":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("3a0b");function r(t){return t||n["a"].state.regionCode}},7708:function(t,e,a){},"7ea2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.valid?a("div",{staticClass:"item-card"},[t.noLink?a("div",{on:{click:t.onClick}},[a("transition",{attrs:{name:"fade"}},[t.loading?a("div",{staticClass:"loading"},[a("div",{staticClass:"loader-box"},[a("div",{staticClass:"loader"}),a("div",{staticClass:"label"},[t._v("Loading #"+t._s(t.itemId))])])]):t._e()]),a("transition",{attrs:{name:"fade"}},[t.loading?t._e():a("div",{staticClass:"entry"},[a("div",{staticClass:"icon"},[a("item-icon",{staticClass:"centering",attrs:{iconIndex:t.itemData.iconIndex,rank:t.itemData.rank,count:t.stackSize,type:t.itemData.type.type}})],1),t.rate?a("div",{staticClass:"rate"},[t._v(" "+t._s(t._f("rate")(t.rate))+"% ")]):t._e(),a("div",{staticClass:"title"},[a("div",{staticClass:"remark"},[a("span",{staticClass:"iid"},[t._v("#"+t._s(t.itemId))])]),a("div",{staticClass:"head"},[t.goldAmt?a("span",[t._v(t._s(t._f("thousands")(t.goldAmt)))]):t._e(),t._v(" "+t._s(t.name)+" ")]),a("div",{staticClass:"remark"},[t.itemData.level>1?a("span",{staticClass:"level"},[t._v(t._s(t.itemData.level)+" ")]):t._e(),t.itemData.tier?a("span",{staticClass:"tier",domProps:{innerHTML:t._s(t.itemData.tier+" ")}}):t._e(),a("span",{class:"rank-"+t.itemData.rank.toLowerCase()},[t._v(t._s(t._f("rankname")(t.itemData.rank))+" ")]),t.timeLimit?a("span",[t._v(t._s(t.timeLimit)+"-天 ")]):t.itemData.durationDays?a("span",[t._v(t._s(t.itemData.durationDays)+"-天 ")]):t._e(),t.canUse?a("span",{staticClass:"can-use"},[t._v(t._s(t.canUse)+" ")]):t._e(),t.itemData.cashItem?a("span",{staticClass:"cash"},[t._v("点券 ")]):t._e(),t._v(" "+t._s(t.category)+" ")])]),t.potentialNum?a("div",{staticClass:"potential"},[a("div",{staticClass:"wrapper"},[t._v(" Option "),t._l(t.potentialStatList,(function(e){return a("div",{key:e.abbv,staticClass:"potential-entry"},[t._v(" "+t._s(e.abbv)+" ")])}))],2)]):t._e()])])],1):a("router-link",{attrs:{to:{path:"/items/"+t.itemEasyUrl,query:t.itemQuery}}},[a("transition",{attrs:{name:"fade"}}),a("transition",{attrs:{name:"fade"}},[t.loading?t._e():a("div",{staticClass:"entry"},[a("div",{staticClass:"icon"},[a("item-icon",{staticClass:"centering",attrs:{iconIndex:t.itemData.iconIndex,rank:t.itemData.rank,count:t.stackSize,type:t.itemData.type.type}})],1),t.rate?a("div",{staticClass:"rate"},[t._v(" "+t._s(t._f("rate")(t.rate))+"% ")]):t._e(),a("div",{staticClass:"title"},[a("div",{staticClass:"remark"},[a("span",{staticClass:"iid"},[t._v("#"+t._s(t.itemId))])]),a("div",{staticClass:"head"},[t.goldAmt?a("span",[t._v(t._s(t._f("thousands")(t.goldAmt)))]):t._e(),t._v(" "+t._s(t.name)+" ")]),a("div",{staticClass:"remark"},[t.itemData.level>1?a("span",{staticClass:"level"},[t._v(t._s(t.itemData.level)+" ")]):t._e(),t.itemData.tier?a("span",{staticClass:"tier",domProps:{innerHTML:t._s(t.itemData.tier+" ")}}):t._e(),a("span",{class:"rank-"+t.itemData.rank.toLowerCase()},[t._v(t._s(t._f("rankname")(t.itemData.rank))+" ")]),t.timeLimit?a("span",[t._v(t._s(t.timeLimit)+"-天 ")]):t.itemData.durationDays?a("span",[t._v(t._s(t.itemData.durationDays)+"-天 ")]):t._e(),t.canUse?a("span",{staticClass:"can-use"},[t._v(t._s(t.canUse)+" ")]):t._e(),t.itemData.cashItem?a("span",{staticClass:"cash"},[t._v("点券 ")]):t._e(),t._v(" "+t._s(t.category)+" ")]),t.itemData.skillInfo?a("div",{staticClass:"skill"},[t.itemData.skillInfo.name?a("span",[t._v(" "+t._s(t.itemData.skillInfo.name.message)+" ")]):a("span",[t._v(" Skill "+t._s(t.itemData.skillInfo.id)+" ")]),t.itemData.skillInfo.job?a("span",{staticClass:"job"},[t._v(" ("+t._s(t.itemData.skillInfo.job.displayName)+") ")]):t._e()]):t._e()]),t.potentialNum?a("div",{staticClass:"potential"},[a("div",{staticClass:"wrapper"},[t._v(" Option "),t._l(t.potentialStatList,(function(e){return a("div",{key:e.abbv,staticClass:"potential-entry"},[t._v(" "+t._s(e.abbv)+" ")])}))],2)]):t._e()])])],1)],1):t._e()},r=[],i=(a("4de4"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("2b0e")),o=a("5489"),s=a("ae0c"),c=a("5a8f");i["a"].component("item-icon",o["a"]);var l={props:["itemId","count","itemStub","noLink","onClick","timeLimit","goldAmt","potentialNum","rate"],name:"item-card",data:function(){return{stackSize:0,loading:!0,itemData:null,valid:!0}},created:function(){this.fetchData()},watch:{itemId:function(t,e){t!=e&&this.fetchData()},count:function(t,e){t!=e&&(this.stackSize=t)}},computed:{name:function(){if(this.itemData.name){if(this.itemData.name.name&&this.itemData.name._NameID)return this.itemData.name.name;if(this.itemData.name._NameID)return"Item MID: "+this.itemData.name._NameID}return"Unnamed Item "+this.itemId},canUse:function(){return this.itemData.needClass?this.itemData.needClass.filter((function(t){return 0!=t.id})).map((function(t){return t.displayName})).join("/​"):null},category:function(){return c["a"].getItemDetailedCategory(this.itemData)},statSet:function(){return s["a"].joinStatSet(this.itemData.stats)},itemQuery:function(){var t={};return this.potentialNum&&(t.potential=this.potentialNum),t},potentialStatList:function(){if(!this.itemData.potentials||!this.potentialNum)return[];var t=this.itemData.potentials;for(var e in t){var a=t[e];if(a.potentialNumber==this.potentialNum){var n=[],r=a.states,i={};for(var o in r){var c=r[o].state,l=s["a"].getStateInfo(c);l.minmax&&(c=l.minmax,l=s["a"].getStateInfo(c)),i[c]||(i[c]=l,n.push(l))}return n.slice(0,Math.min(3,n.length))}}},itemEasyUrl:function(){return c["a"].itemEasyUrl(this.itemId,this.itemData?this.itemData:this.itemStub)}},methods:{fetchData:function(){var t=this;if(this.loading=!0,this.itemData=null,this.stackSize=this.count,this.valid=!0,this.itemStub)return this.itemData=this.itemStub,this.itemStub.count&&(this.stackSize=this.itemStub.count),this.itemData.type?void(this.loading=!1):void(this.valid=!1);c["a"].getItem(this.itemId,this.$store.state.regionCode,(function(e){t.itemData=e,t.loading=!1}),(function(t){}))}}},u=l,d=(a("5d26"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"4aca7b0f",null);e["a"]=p.exports},"88f1":function(t,e,a){},b461:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-list-entry",attrs:{narrow:t.narrow}},[t._t("default")],2)},r=[],i=a("2b0e"),o=i["a"].extend({props:{narrow:{type:Boolean}}}),s=o,c=(a("fe73"),a("2877")),l=Object(c["a"])(s,n,r,!1,null,"83cab26c",null);e["a"]=l.exports},b9aa:function(t,e,a){},bf37:function(t,e,a){t.exports=a.p+"img/close.3c98b7b4.svg"},c913:function(t,e,a){"use strict";a("7708")},d58f:function(t,e,a){var n=a("1c0b"),r=a("7b0b"),i=a("44ad"),o=a("50c4"),s=function(t){return function(e,a,s,c){n(a);var l=r(e),u=i(l),d=o(l.length),p=t?d-1:0,f=t?-1:1;if(s<2)while(1){if(p in u){c=u[p],p+=f;break}if(p+=f,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=f)p in u&&(c=a(c,u[p],p,l));return c}};t.exports={left:s(!1),right:s(!0)}},de79:function(t,e,a){"use strict";a("e708")},e708:function(t,e,a){},f3d6:function(t,e,a){},fe73:function(t,e,a){"use strict";a("88f1")}}]);
//# sourceMappingURL=drop-view.d9b32ef6.js.map