{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/components/item/shop/ShopToolKit.vue?02ca","webpack:///./src/components/item/shop/ShopToolKit.vue?05fc","webpack:///./src/components/item/shop/ShopToolKit.vue?cd2a","webpack:///./src/components/item/shop/ShopToolKit.vue","webpack:///./src/components/item/shop/ShopBrowser.vue?eaff","webpack:///./src/components/item/shop/ShopBrowser.vue?bdd2","webpack:///./src/models/items/IItemShop.ts","webpack:///./src/api/ShopProvider.ts","webpack:///./src/components/item/shop/ShopBrowser.vue?09e0","webpack:///./src/components/item/shop/ShopBrowser.vue?aa14","webpack:///./src/components/item/shop/ShopBrowser.vue","webpack:///./src/components/item/shop/ShopToolKit.vue?4a56"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_e","_m","_l","item","index","key","class","selectedArea","on","$event","clickButton","_v","_s","name","directives","rawName","value","expression","npcData","selectedNpc","selectedShop","data","selectedJob","staticStyle","search","shopId","isClick","staticRenderFns","component","Loader","extend","components","ShopBrowser","GoBack","isShowNpc","isShowShop","isShowJob","loading","created","shopIndex","$store","getters","get","then","result","dispatch","SetShopIndex","catch","err","console","log","methods","$set","selectedId","type","computed","watch","PurchaseType","PurchaseLimitType","ShopLimitResetType","shopData","i","num","pageNumber","setPage","slot","highlight","findIndex","sl","itemId","quantity","useClick","clickItem","seals","cost","costType","_f","costParam","costItemId","limitString","limitType","limitParam","tab","id","tabIndex","setTab","message","_shopCache","_shopReqCache","RequestCache","region","_ensureRegion","_cacheKey","cached","Promise","resolve","tryCache","TableProvider","getTableRowsMatching","limit","res","ret","tabs","tabIds","values","reduce","pv","cv","_TabID","tabId","first","find","r","tabNameId","_TabNameID","UiStringProvider","entries","filter","e","entry","_ListID","_itemindex","_Quantity","_PurchaseType1","_PurchaseItem1","_PurchaseItemValue1","_PurchaseType2","_PurchaseItem2","_PurchaseItemValue2","c","_PurchaseLimitType","_PurchaseLimitValue","limitCount","_buyLimitCount","limitReset","_ShopLimitReset","itemOption","_ItemOptionID","RepurchaseTime","_RepurchaseTime","_ShopSealCount","rollPotentialOnPurchase","_PotentialList","push","store","state","regionCode","Points","props","Number","Boolean","default","ItemIconTooltip","ItemCard","LoadingErrorable","load","numPages","currentTab","Math","max","ceil","map","t","currentTabItems","currentPageItems","currentPageSlots","idx","mounted","startLoad","getShop","done","failed","formattingTime","DAILY","DAILY_ACCOUNT","WEEKLY","WEEKLY_ACCOUNT","WEEKLY_ACCOUNT_PER","ud","$emit","count","time","second","minute","hour","day"],"mappings":"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","file":"js/items.208dd651.js","sourcesContent":["import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop-toolkit\"},[_c('go-back'),(_vm.loading)?_c('div',[_c('load-indicator',{attrs:{\"loadText\":\"正在加载商店列表\"}})],1):_vm._e(),(_vm.npcData)?_c('div',[_c('div',{staticClass:\"row-wrapper\"},[_vm._m(0),_c('div',_vm._l((_vm.npcData),function(item,index){return _c('button',{key:index,class:{'is-selected':_vm.selectedArea == index },on:{\"click\":function($event){return _vm.clickButton('Area', index)}}},[_vm._v(_vm._s(item.name))])}),0)]),_c('div',{staticClass:\"row-wrapper\"},[_vm._m(1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowNpc),expression:\"isShowNpc\"}]},_vm._l((_vm.npcData[_vm.selectedArea].data),function(item,index){return _c('button',{key:index,class:{'is-selected':_vm.selectedNpc == index },on:{\"click\":function($event){return _vm.clickButton('Npc', index)}}},[_vm._v(_vm._s(item.name))])}),0)]),_c('div',{staticClass:\"row-wrapper\"},[_vm._m(2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowShop),expression:\"isShowShop\"}]},_vm._l(((_vm.npcData[_vm.selectedArea].data)[_vm.selectedNpc].data),function(item,index){return _c('button',{key:index,class:{'is-selected':_vm.selectedShop == index },on:{\"click\":function($event){return _vm.clickButton('Shop', index)}}},[_vm._v(_vm._s(item.name))])}),0)]),(typeof ((_vm.npcData[_vm.selectedArea].data)[_vm.selectedNpc].data)[_vm.selectedShop].data === 'number')?_c('div',{staticClass:\"row-wrapper\"}):_c('div',{staticClass:\"row-wrapper\"},[_vm._m(3),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowJob),expression:\"isShowJob\"}]},_vm._l((['战士', '弓箭', '法师', '牧师', '学者', '舞娘', '刺客', '萌骑士', '兽娘', '浪客']),function(item,index){return _c('button',{key:index,class:{'is-selected':_vm.selectedJob == index },on:{\"click\":function($event){return _vm.clickButton('Job', index)}}},[_vm._v(_vm._s(item))])}),0)])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowShop),expression:\"isShowShop\"}]},[_c('button',{staticStyle:{\"margin-top\":\"20px\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])]),_c('div',{staticClass:\"browser\"},[(_vm.shopId)?_c('shop-browser',{attrs:{\"shopId\":_vm.shopId,\"useClick\":_vm.isClick}}):_vm._e()],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-font\"},[_c('span',[_vm._v(\"区域\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-font\"},[_c('span',[_vm._v(\"NPC\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-font\"},[_c('span',[_vm._v(\"商店\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-font\"},[_c('span',[_vm._v(\"职业\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport ShopBrowser from './ShopBrowser.vue';\r\n// import npcData from './NpcData';\r\nimport { ApiHttpClient } from \"@/globals\";\r\nimport GoBack from \"@/components/util/GoBack.vue\";\r\nimport Loader from \"@/components/util/Loader.vue\";\r\nimport { Actions } from '@/storemutations';\r\nVue.component(\"load-indicator\", Loader);\r\ninterface IData {\r\n    selectedArea: number;\r\n    selectedNpc: number;\r\n    selectedShop: number;\r\n    selectedJob: number;\r\n    isShowNpc: boolean,\r\n    isShowShop: boolean,\r\n    isShowJob: boolean,\r\n    npcData: any;\r\n    shopId: number;\r\n    isClick: boolean,\r\n    loading: boolean\r\n}\r\n\r\n\r\n\r\nexport default Vue.extend({\r\n    components: {\r\n        ShopBrowser,\r\n        GoBack\r\n    },\r\n    data(): IData {\r\n        return {\r\n            selectedArea: 0,\r\n            selectedNpc: 0,\r\n            selectedShop: 0,\r\n            selectedJob: 0,\r\n            isShowNpc: true,\r\n            isShowShop: true,\r\n            isShowJob: true,\r\n            npcData: null,\r\n            //shopId: parseInt(this.$route.params.id),\r\n            shopId: 0,\r\n            isClick:true,\r\n            loading:true,\r\n        };\r\n    },\r\n    created() {\r\n        const shopIndex = this.$store.getters.shopIndex;\r\n        if(shopIndex) {\r\n            this.npcData = shopIndex;\r\n            this.loading = false;\r\n        } else {\r\n            ApiHttpClient.get('shopIndex.php?lan=cn').then((result) => {\r\n                this.npcData = result.data;\r\n                this.$store.dispatch(Actions.SetShopIndex, result.data);\r\n                this.loading = false;\r\n            }).catch((err) => {\r\n                console.log('err: ', err);\r\n            });\r\n        }\r\n    },\r\n    methods:{\r\n        search() {\r\n            this.$set(this, 'shopId', this.selectedId)\r\n        },\r\n        clickButton(type:string, index:number){\r\n            // this['selected' + type] = index;\r\n            // if (type === 'Job') return\r\n            // this.isShowJob = true;\r\n            // this.selectedJob = 0;\r\n            // if (type === 'Shop') return\r\n            // this.isShowShop = true;\r\n            // this.isShowJob = false;\r\n            // this.selectedShop = 0;\r\n            // if (type === 'Npc') return\r\n            // this.isShowNpc = true;\r\n            // this.isShowShop = false;\r\n            // this.selectedNpc = 0;\r\n            if (type === 'Area') {\r\n                this.selectedArea = index;\r\n                // this.isShowNpc = true;\r\n                // this.isShowShop = false;\r\n                // this.isShowJob = false;\r\n                this.selectedNpc = 0;\r\n                this.selectedShop = 0;\r\n                this.selectedJob = 0;\r\n            }\r\n            if (type === 'Npc') {\r\n                this.selectedNpc = index;\r\n                // this.isShowShop = true;\r\n                // this.isShowJob = false;\r\n                this.selectedShop = 0;\r\n                this.selectedJob = 0;\r\n            }\r\n            if (type === 'Shop') {\r\n                this.selectedShop = index;\r\n                // this.isShowJob = true;\r\n                this.selectedJob = 0;\r\n            }\r\n            if (type === 'Job') {\r\n                this.selectedJob = index;\r\n            }\r\n        },\r\n        \r\n    },\r\n    computed: {\r\n        selectedId(): number {\r\n            let data = ((this.npcData[this.selectedArea].data)[this.selectedNpc].data)[this.selectedShop].data;\r\n            if (!data) {\r\n                return 0\r\n            } else {\r\n                if(typeof data === 'number') {\r\n                    return  data;\r\n                } else {\r\n                    return data[this.selectedJob]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    watch:{},\r\n})\r\n","import mod from \"-!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopToolKit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopToolKit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ShopToolKit.vue?vue&type=template&id=13d95a39&scoped=true&\"\nimport script from \"./ShopToolKit.vue?vue&type=script&lang=ts&\"\nexport * from \"./ShopToolKit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ShopToolKit.vue?vue&type=style&index=0&id=13d95a39&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13d95a39\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopBrowser.vue?vue&type=style&index=0&id=20fe35eb&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item-shop\"},[(_vm.shopData.loading)?_c('div',{staticClass:\"loading\"},[_c('loader',{attrs:{\"load-text\":\"正在加载商店\"}})],1):_vm._e(),(_vm.shopData.value)?_c('div',{staticClass:\"result\"},[_c('div',{staticClass:\"shop-pane\"},[_c('div',{staticClass:\"pages\"},_vm._l((_vm.numPages),function(i,num){return _c('div',{key:i,staticClass:\"page-tab\",attrs:{\"active\":num === _vm.pageNumber},on:{\"click\":function($event){return _vm.setPage(num)}}},[_vm._v(\" \"+_vm._s(i)+\" \")])}),0),_c('div',{staticClass:\"item-grid\"},_vm._l((_vm.currentPageSlots),function(slot,i){return _c('div',{key:i,staticClass:\"grid-entry\",class:_vm.highlight.findIndex(function (sl) { return i === sl; }) !== -1 ? 'highlight' : ''},[(slot)?[_c('item-icon-tooltip',{attrs:{\"itemId\":slot.itemId,\"count\":slot.quantity,\"userData\":slot,\"noLink\":!_vm.useClick,\"directionHint\":i > 9 ? 'up' : 'down'},on:{\"click\":_vm.clickItem}},[_c('div',{staticClass:\"purchase-details\"},[(slot.seals >= 0)?_c('div',{staticClass:\"seals section\"},[(slot.seals == 0)?[_vm._v(\" Item can have bindings added \")]:[_vm._v(\" Item has \"),_c('strong',[_vm._v(_vm._s(slot.seals))]),_vm._v(\" unbinds \")]],2):_vm._e(),_c('div',{staticClass:\"costs section\"},[_c('div',{staticClass:\"cost-label\"},[_vm._v(\"购买\")]),_vm._l((slot.cost),function(cost,i){return _c('div',{key:i,staticClass:\"cost\"},[(cost.costType == 1)?_c('div',{staticClass:\"gold\"},[(cost.costParam)?[_vm._v(_vm._s(_vm._f(\"gold\")(cost.costParam)))]:_vm._e()],2):(cost.costType == 2)?_c('div',{staticClass:\"card-container\"},[_c('item-card',{attrs:{\"itemId\":cost.costItemId,\"count\":cost.costParam,\"noLink\":true,\"onClick\":function (){}}})],1):(cost.costType == 3)?[_c('strong',[_vm._v(_vm._s(cost.costParam)+\" 天梯点数\")])]:(cost.costType == 4)?[_c('strong',[_vm._v(_vm._s(cost.costParam)+\" 联盟点数\")])]:_c('div',{staticClass:\"point-container\"},[_c('point-tag',{attrs:{\"pointId\":cost.costType,\"amount\":cost.costParam,\"noTip\":true}})],1)],2)})],2),(slot.limitReset)?_c('div',{staticClass:\"limits section\"},[_vm._v(\" 限制 \"),_c('strong',[_vm._v(_vm._s(_vm.limitString(slot)))])]):_vm._e(),(slot.limitType)?_c('div',{staticClass:\"requirements section\"},[(slot.limitType == 2)?[_vm._v(\" 需要 Lv \"),_c('strong',[_vm._v(_vm._s(slot.limitParam)+\"+\")])]:(slot.limitType == 3)?[_vm._v(\" 需要 PvP 等级 \"),_c('strong',[_vm._v(_vm._s(slot.limitParam)+\"+\")])]:(slot.limitType == 6)?[_c('strong',[_vm._v(_vm._s(slot.limitParam)+\"+\")]),_vm._v(\" 需要成就点数 \")]:(slot.limitType == 7)?[_vm._v(\" 需要天梯等级 \"),_c('strong',[_vm._v(_vm._s(_vm._f(\"LadderRank\")(slot.limitParam))+\"以上\")])]:_vm._e()],2):_vm._e()])])]:_vm._e()],2)}),0)]),_c('div',{staticClass:\"tabs\"},_vm._l((_vm.shopData.value.tabs),function(tab){return _c('div',{key:tab.id,staticClass:\"tab\",attrs:{\"active\":_vm.tabIndex === tab.id},on:{\"click\":function($event){return _vm.setTab(tab.id)}}},[_vm._v(\" \"+_vm._s(tab.name.message)+\" \")])}),0)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import IUiStringMessage from '@/models/uistring/IUiStringMessage';\r\n\r\nexport default interface IItemShop {\r\n    id: number;\r\n    tabs: IItemShopTab[];\r\n}\r\n\r\nexport interface IItemShopTab {\r\n    id: number;\r\n    name: IUiStringMessage;\r\n    entries: IItemShopTabEntry[];\r\n}\r\n\r\nexport interface IItemShopTabEntry {\r\n    id: number;\r\n    index: number;\r\n    itemId: number;\r\n    quantity: number;\r\n    cost: {\r\n        costType: PurchaseType;\r\n        costItemId: number;\r\n        costParam: number;\r\n    }[];\r\n    limitType: PurchaseLimitType;\r\n    limitParam: number;\r\n    limitCount: number;\r\n    limitReset: ShopLimitResetType;\r\n    itemOption: number;\r\n    seals: number;\r\n    rollPotentialOnPurchase: boolean;\r\n    RepurchaseTime:number;\r\n}\r\n\r\nexport enum PurchaseType {\r\n    NONE,\r\n    COIN,\r\n    ITEM,\r\n    LADDER_POINTS,\r\n    FRIENDSHIP,\r\n    BEGIN_POINTS = 8,\r\n}\r\n\r\nexport enum PurchaseLimitType {\r\n    NONE,\r\n    MIN_LEVEL = 2,\r\n    MIN_PVP_RANK,\r\n    ACHIEVEMENT_POINTS = 6,\r\n    MIN_LADDER_RANK,\r\n}\r\n\r\nexport enum ShopLimitResetType {\r\n    NONE,\r\n    DAILY,\r\n    WEEKLY,\r\n    DAILY_ACCOUNT,\r\n    WEEKLY_ACCOUNT,\r\n    WEEKLY_ACCOUNT_PER,\r\n}\r\n","import ITypedMap from '@/models/util/ITypedMap';\r\nimport RequestCache from '@/models/util/RequestCache';\r\n\r\nimport { ApiHttpClient } from \"@/globals\";\r\nimport store from '@/store';\r\nimport IItemShop, { IItemShopTab, IItemShopTabEntry } from '@/models/items/IItemShop';\r\nimport ICombinedShopTableRow from '@/models/items/raw/ICombinedShopTableRow';\r\nimport UiStringProvider from './UiStringProvider';\r\nimport TableProvider from './TableProvider';\r\n\r\nexport interface IShopProvider {\r\n    \r\n    getShop(id: number, region?: string): Promise<IItemShop>;\r\n}\r\n\r\nclass ShopProvider implements IShopProvider {\r\n    private _shopCache: ITypedMap<IItemShop>;\r\n    private _shopReqCache: RequestCache<IItemShop>;\r\n\r\n    constructor() {\r\n        this._shopCache = {};\r\n        this._shopReqCache = new RequestCache();\r\n    }\r\n\r\n    public async getShop(id: number, region?: string): Promise<IItemShop> {\r\n        region = this._ensureRegion(region);\r\n        let key = this._cacheKey(id, region);\r\n        let cached = this._shopCache[key];\r\n        if (cached) {\r\n            return Promise.resolve(cached);\r\n        }\r\n        \r\n        return this._shopReqCache.tryCache(key, async () => {\r\n            const res = await TableProvider.getTableRowsMatching<ICombinedShopTableRow>('virt.combinedshoptable', '_ShopID', 'eq', id, region, {\r\n                limit: 2000,\r\n            });\r\n\r\n            const ret: IItemShop = {\r\n                id,\r\n                tabs: [],\r\n            };\r\n\r\n            const tabIds = Object.values(res.reduce((pv, cv) => {\r\n                pv[cv._TabID] = cv._TabID;\r\n                return pv;\r\n            }, {} as {[k:number]: number}));\r\n            for (const tabId of tabIds) {\r\n                const first = res.find((r) => r._TabID === tabId);\r\n                if (first) {\r\n                    const tabNameId = first._TabNameID;\r\n                    const tab: IItemShopTab = {\r\n                        id: tabId,\r\n                        name: await UiStringProvider.get(tabNameId, region),\r\n                        entries: [],\r\n                    };\r\n\r\n                    const entries = res.filter((r) => r._TabID === tabId);\r\n                    for (let e of entries) {\r\n                        const entry: IItemShopTabEntry = {\r\n                            id: e.id,\r\n                            index: e._ListID,\r\n                            itemId: e._itemindex,\r\n                            quantity: e._Quantity,\r\n                            cost: [\r\n                                {\r\n                                    costType: e._PurchaseType1,\r\n                                    costItemId: e._PurchaseItem1,\r\n                                    costParam: e._PurchaseItemValue1,\r\n                                },\r\n                                {\r\n                                    costType: e._PurchaseType2,\r\n                                    costItemId: e._PurchaseItem2,\r\n                                    costParam: e._PurchaseItemValue2,\r\n                                },\r\n                            ].filter((c) => c.costType),\r\n                            limitType: e._PurchaseLimitType,\r\n                            limitParam: e._PurchaseLimitValue,\r\n                            limitCount: e._buyLimitCount,\r\n                            limitReset: e._ShopLimitReset,\r\n                            itemOption: e._ItemOptionID,\r\n                            RepurchaseTime: e._RepurchaseTime,\r\n                            seals: e._ShopSealCount,\r\n                            rollPotentialOnPurchase: e._PotentialList,\r\n                        };\r\n\r\n                        tab.entries.push(entry);\r\n                    }\r\n\r\n                    ret.tabs.push(tab);\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        });\r\n\r\n    }\r\n\r\n    private _ensureRegion(region?: string): string {\r\n        if (!region) {\r\n            return store.state.regionCode;\r\n        }\r\n\r\n        return region;\r\n    }\r\n\r\n    private _cacheKey(id: number, region: string) {\r\n        return `${region}:${id}`;\r\n    }\r\n}\r\n\r\nexport default new ShopProvider() as IShopProvider;\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport LoadingErrorable from '@/models/util/LoadingErrorable';\r\nimport ShopProvider from '@/api/ShopProvider';\r\nimport Loader from \"@/components/util/Loader.vue\";\r\nimport IItemShop, { IItemShopTab, IItemShopTabEntry, PurchaseLimitType, ShopLimitResetType } from '@/models/items/IItemShop';\r\nimport ItemIconTooltip from '@/old/items/ItemIconTooltip.vue';\r\nimport ItemCard from '@/old/items/ItemCard.vue';\r\nimport Points from '@/old/game/Points.vue';\r\n\r\nVue.component('point-tag', Points);\r\n\r\ninterface IData {\r\n    shopData: LoadingErrorable<IItemShop, any>,\r\n    tabIndex: number;\r\n    pageNumber: number;\r\n}\r\n\r\nexport default Vue.extend({\r\n    props: {\r\n        shopId: {\r\n            type: Number as () => number,\r\n        },\r\n        useClick: {\r\n            type: Boolean as () => boolean,\r\n            default: false,\r\n        },\r\n        highlight: {\r\n            type: Array as () => number[],\r\n            default() {\r\n                return [];\r\n            },\r\n        }\r\n    },\r\n    components: {\r\n        Loader,\r\n        ItemIconTooltip,\r\n        ItemCard,\r\n    },\r\n    data(): IData {\r\n        return {\r\n            shopData: new LoadingErrorable(),\r\n            tabIndex: 0,\r\n            pageNumber: 0,\r\n        };\r\n    },\r\n    watch: {\r\n        shopId() {\r\n            this.load();\r\n        }\r\n    },\r\n    computed: {\r\n        numPages(): number {\r\n            if (this.shopData.value) {\r\n                const tab = this.currentTab;\r\n                if (tab) {\r\n                    return Math.max(1, Math.ceil(Math.max(...tab.entries.map((r) => r.index)) / 30));\r\n                }\r\n            }\r\n\r\n            return 0;\r\n        },\r\n        currentTab(): IItemShopTab|null {\r\n            if (this.shopData.value) {\r\n                return this.shopData.value.tabs.find((t) => t.id === this.tabIndex) || null;\r\n            }\r\n\r\n            return null;\r\n        },\r\n        currentTabItems(): IItemShopTabEntry[] {\r\n            const tab = this.currentTab;\r\n            if (tab) {\r\n                return tab.entries;\r\n            }\r\n\r\n            return [];\r\n        },\r\n        currentPageItems(): IItemShopTabEntry[] {\r\n            return this.currentTabItems.filter((r) => r.index >= (this.pageNumber * 30) && r.index < ((this.pageNumber + 1) * 30));\r\n        },\r\n        currentPageSlots(): (IItemShopTabEntry|null)[] {\r\n            const ret = [];\r\n            for (let i = 0; i < 30; ++i) {\r\n                const idx = (this.pageNumber * 30) + i;\r\n                ret[i] = this.currentPageItems.find((r) => r.index === idx) || null;\r\n            }\r\n\r\n            return ret;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.load();\r\n    },\r\n    methods: {\r\n        async load() {\r\n            if (this.shopData.loading) {\r\n                return;\r\n            }\r\n\r\n            this.shopData.startLoad();\r\n            try {\r\n                this.shopData.done(await ShopProvider.getShop(this.shopId));\r\n                if (this.shopData.value && this.shopData.value.tabs[0]) {\r\n                    this.tabIndex = this.shopData.value!.tabs[0].id;\r\n                }\r\n            } catch (error) {\r\n                this.shopData.failed(error);\r\n            }\r\n        },\r\n        setTab(idx: number) {\r\n            this.tabIndex = idx;\r\n            this.pageNumber = 0;\r\n        },\r\n        setPage(idx: number) {\r\n            this.pageNumber = idx;\r\n        },\r\n        limitString(entry: IItemShopTabEntry): string {\r\n            if(entry.RepurchaseTime>0){\r\n                return this.formattingTime(entry.RepurchaseTime) + `可以再次购买`\r\n            }\r\n            switch (entry.limitReset) {\r\n                case ShopLimitResetType.DAILY:\r\n                    return `每天可购买 ${entry.limitCount} 个`;\r\n                case ShopLimitResetType.DAILY_ACCOUNT:\r\n                    return `账号每天可购买 ${entry.limitCount} 个`;\r\n                case ShopLimitResetType.WEEKLY:\r\n                    return `每周可购买 ${entry.limitCount} 个`;\r\n                case ShopLimitResetType.WEEKLY_ACCOUNT:\r\n                    return `账号每周可购买 ${entry.limitCount} 个`;\r\n                case ShopLimitResetType.WEEKLY_ACCOUNT_PER:\r\n                    return `账号每周可购买 ${entry.limitCount} 个`;\r\n                default:\r\n                    return `${entry.limitCount} per unknown:${entry.limitReset}`;\r\n            }\r\n        },\r\n        clickItem(ud: IItemShopTabEntry) {\r\n            this.$emit('click', ud);\r\n        },\r\n        formattingTime(count: number) {\r\n            let time = '';\r\n            let second = count % 60;\r\n            let minute = (count / 60) % 60;\r\n            time = second + \"秒\";\r\n            if (minute >= 1 ) {\r\n                time = minute + \"分\" +second + \"秒\";\r\n            }\r\n            let hour = ( count / 60 / 60 ) % 24;\r\n            if ( hour >= 1 ) {\r\n                time = hour + \"小时\" + minute + \"分\" + second + \"秒\";\r\n            }\r\n            let day = ( ( count / 60 / 60 ) / 24 );\r\n            if ( day >= 1 ) {\r\n                time = day + \"天\" + hour + \"小时\" + minute + \"分\" + second + \"秒\";\r\n            }\r\n            return time;\r\n        }\r\n\r\n    }\r\n});\r\n","import mod from \"-!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopBrowser.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopBrowser.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ShopBrowser.vue?vue&type=template&id=20fe35eb&scoped=true&\"\nimport script from \"./ShopBrowser.vue?vue&type=script&lang=ts&\"\nexport * from \"./ShopBrowser.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ShopBrowser.vue?vue&type=style&index=0&id=20fe35eb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20fe35eb\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShopToolKit.vue?vue&type=style&index=0&id=13d95a39&lang=less&scoped=true&\""],"sourceRoot":""}