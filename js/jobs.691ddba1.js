(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["jobs"],{"06ca":function(t,s,e){"use strict";e("bb1e")},"07d6":function(t,s,e){},"098b":function(t,s,e){},1819:function(t,s,e){"use strict";e("8e56")},"1f0e":function(t,s,e){"use strict";e("07d6")},"2a47":function(t,s,e){},"2bb7":function(t,s,e){"use strict";e("5438")},"2e1f":function(t,s,e){},3116:function(t,s,e){"use strict";e("098b")},5438:function(t,s,e){},"81a9":function(t,s,e){"use strict";e("2e1f")},"8e56":function(t,s,e){},bb1e:function(t,s,e){},c3fc:function(t,s,e){},c717:function(t,s,e){"use strict";e.d(s,"a",(function(){return i}));e("99af");var a=e("53ca");function i(t){if("object"!==Object(a["a"])(t))return String(t);if(t.response){var s=t,e=s.response,i="HTTP ".concat(e.status," ").concat(e.statusText);return i+=": ".concat(e.data),i}return"请求失败"}},d3e5:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"job-view"},[t.job.loading?e("div",{staticClass:"loading"},[e("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.job.isSuccess()&&t.job.value?e("div",{staticClass:"result"},[e("div",{staticClass:"breadcrumb"},[e("router-link",{staticClass:"breadcrumb-entry",attrs:{to:{name:"jobs"}}},[t._v(" 职业列表 ")]),t._l(t.getBreadcrumb(),(function(t){return e("router-link",{key:t.id,staticClass:"breadcrumb-entry",attrs:{to:{name:"job-view",params:{jobId:t.id}}}},[e("sprite-icon",{attrs:{"icon-info":t.icon,"size-override":20}}),e("ui-string",{attrs:{"message-data":t.name,inline:!0}})],1)}))],2),e("div",{staticClass:"header"},[e("div",{staticClass:"icon"},[e("sprite-icon",{attrs:{"icon-info":t.job.value.icon}})],1),e("div",{staticClass:"title"},[e("div",{staticClass:"remark"},[e("span",{staticClass:"id"},[t._v("#"+t._s(t.jobId))])]),e("h2",{staticClass:"head"},[e("ui-string",{staticClass:"name",attrs:{"message-data":t.job.value.name}})],1),e("div",{staticClass:"remark"},[0==t.job.value.jobNumber?e("span",{staticClass:"base"},[t._v("基础职业")]):e("span",{class:"spec spec-"+t.job.value.jobNumber},[t._v(t._s(t.job.value.jobNumber)+" 转")]),0!=t.job.value.classType?e("span",{class:"spinoff "+t.getClassType()},[t._v(" "+t._s(t.getClassName())+"外传 ")]):t._e(),t.job.value.hasAwakening?e("span",{staticClass:"awakened"},[t._v("觉醒 ")]):t._e(),e("span",{staticClass:"type"},[t._v(t._s(t.job.value.mainStatString.message)+" ")])])])]),t.job.value.jobDescription.id?e("div",{staticClass:"dv-section"},[e("div",{staticClass:"dividing title"},[t._v(" 描述 ")]),e("i",[e("ui-string",{attrs:{"message-data":t.job.value.jobDescription}})],1)]):t._e(),e("div",{staticClass:"dv-section"},[e("div",{staticClass:"dividing title"},[t._v(" 职业四维 ")]),e("job-stat-scaling",{attrs:{"job-id":t.job.value.id}})],1),e("div",{staticClass:"dv-section"},[e("div",{staticClass:"dividing title"},[t._v(" 技能树 ")]),e("skill-tree",{attrs:{"job-id":t.job.value.id}})],1),e("p",[t._v(" 其他额外功能和信息在开发中。 ")])]):t._e()])},i=[],n=(e("a9e3"),e("2b0e")),r=e("bfe8"),o=e("e0b1"),c=e("a1ad"),l=e("40a3"),d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"job-stat-scaling"},[t.scaling.loading?e("div",{staticClass:"loading"},[e("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.scaling.isSuccess()&&t.scaling.value?e("div",{staticClass:"result"},[e("div",{staticClass:"two-col"},[e("table",{staticClass:"col"},[t._m(0),e("tbody",[e("tr",[e("th",[t._v("力量→物攻")]),e("td",[t._v(t._s(t.scaling.value.strToPhys))])]),e("tr",[e("th",[t._v("敏捷→物攻")]),e("td",[t._v(t._s(t.scaling.value.agiToPhys))])]),e("tr",[e("th",[t._v("智力→魔攻")]),e("td",[t._v(t._s(t.scaling.value.intToMagic))])]),t.scaling.value.scalingVersion?[e("tr",[e("th",[t._v("力量→爆伤")]),e("td",[t._v(t._s(t.scaling.value.strToCritDmg))])]),e("tr",[e("th",[t._v("敏捷→爆伤")]),e("td",[t._v(t._s(t.scaling.value.agiToCritDmg))])]),e("tr",[e("th",[t._v("智力→爆伤")]),e("td",[t._v(t._s(t.scaling.value.intToCritDmg))])])]:[e("tr",[e("th",[t._v("力量→爆伤+INT")]),e("td",[t._v(t._s(t.scaling.value.strIntToCritDmg))])])]],2)]),e("table",{staticClass:"col"},[t._m(1),e("tbody",[e("tr",[e("th",[t._v("体质→HP")]),e("td",[t._v(t._s(t.scaling.value.vitToHp))])]),e("tr",[e("th",[t._v("体质→物防")]),e("td",[t._v(t._s(t.scaling.value.vitToDef))])]),e("tr",[e("th",[t._v("智力→魔防")]),e("td",[t._v(t._s(t.scaling.value.intToMdef))])]),e("tr",[e("th",[t._v("敏捷→暴击")]),e("td",[t._v(t._s(t.scaling.value.agiToCrit))])])])])])]):t._e()])},u=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("th",[t._v("属性")]),e("th",[t._v("值")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("th",[t._v("属性")]),e("th",[t._v("值")])])}],v=n["a"].extend({components:{Loader:l["a"]},props:{jobId:{type:Number}},data:function(){return{scaling:new r["a"]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.scaling.startLoad(),o["a"].getJobScaling(this.jobId).then((function(s){t.scaling.done(s)})).catch((function(s){t.scaling.failed(s)}))}}}),f=v,b=(e("81a9"),e("2877")),h=Object(b["a"])(f,d,u,!1,null,"3d06648a",null),g=h.exports,_=e("3bbf"),p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"skill-tree"},[t.tree.loading?e("div",{staticClass:"loading"},[e("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.tree.isSuccess()&&t.tree.value?e("div",{staticClass:"result"},[e("div",{staticClass:"skill-grid"},[t.jobInfo?e("div",{staticClass:"grid-head"},[t._v(t._s(t.jobInfo.name.message))]):t._e(),e("div",{staticClass:"grid-body"},t._l(t.slots,(function(s,a){return e("div",{key:"sk-"+a,staticClass:"grid-entry"},[s?[e("skill-stub-link",{attrs:{skillId:s.skillId,skillData:s,iconOnly:!0}})]:t._e()],2)})),0)]),t.awakeningSkills.length?[e("div",{staticClass:"skill-grid"},[e("div",{staticClass:"grid-head"},[t._v("觉醒")]),e("div",{staticClass:"grid-body"},t._l(t.awakeningSlots,(function(s,a){return e("div",{key:"sk-"+a,staticClass:"grid-entry"},[s?[e("skill-stub-link",{attrs:{skillId:s.skillId,skillData:s,iconOnly:!0}})]:t._e()],2)})),0)])]:t._e()],2):t._e()])},m=[],j=(e("4de4"),e("7db0"),e("96cf"),e("1da1")),C=e("4c30"),y=e("db4b"),k=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"job-icon-wrapper",style:"width: "+t.sizePx+"px; height: "+t.sizePx+"px;"},[e("div",{staticClass:"job-icon-resize",style:"transform: scale("+t.resize+")"},[e("div",{staticClass:"job-icon",style:"width: "+t.iconInfo.size+"px; height: "+t.iconInfo.size+"px;"},[e("div",{staticClass:"job",style:"background:url("+t.iconInfo.url+") -"+t.iconInfo.x+"px -"+t.iconInfo.y+"px;"})])])])},I=[],x=n["a"].extend({props:{iconInfo:{type:Object},sizeOverride:{type:Number}},computed:{resize:function(){if(this.sizeOverride){var t=Number(this.sizeOverride);return Math.floor(t/this.iconInfo.size*100)/100}return 1},sizePx:function(){return this.iconInfo.size*this.resize}}}),T=x,w=(e("1f0e"),Object(b["a"])(T,k,I,!1,null,"1fec35a9",null)),S=w.exports,D=n["a"].extend({components:{Loader:l["a"],SkillStubLink:y["a"],JobIcon:S},props:{jobId:{type:Number}},data:function(){return{tree:new r["a"],jobInfo:null}},computed:{skills:function(){return this.tree.value?this.jobInfo&&2===this.jobInfo.jobNumber?this.tree.value.filter((function(t){return!t.isAwakened})):this.tree.value:[]},slots:function(){for(var t=this,s=[],e=function(e){s[e]=t.skills.find((function(t){return t.index===e}))||null},a=0;a<28;++a)e(a);return s},awakeningSkills:function(){return this.tree.value&&this.jobInfo&&2===this.jobInfo.jobNumber?this.tree.value.filter((function(t){return t.isAwakened})):[]},awakeningSlots:function(){for(var t=this,s=[],e=function(e){s[e]=t.awakeningSkills.find((function(t){return t.index===e}))||null},a=0;a<28;++a)e(a);return s}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.tree.startLoad(),s.prev=1,t.jobInfo=null,s.prev=3,s.next=6,o["a"].getJob(t.jobId);case 6:t.jobInfo=s.sent,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](3),console.log("Failed to load job",s.t0);case 12:return s.t1=t.tree,s.next=15,C["a"].getSkillTreeInfo(t.jobId);case 15:s.t2=s.sent,s.t1.done.call(s.t1,s.t2),s.next=23;break;case 19:s.prev=19,s.t3=s["catch"](1),console.log(s.t3),t.tree.failed(s.t3);case 23:case"end":return s.stop()}}),s,null,[[1,19],[3,9]])})))()},fetchJob:function(){return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}}),O=D,J=(e("db8b"),Object(b["a"])(O,p,m,!1,null,"196b952f",null)),z=J.exports,N=n["a"].extend({components:{Loader:l["a"],SpriteIcon:c["a"],JobStatScaling:g,UiString:_["a"],SkillTree:z},props:{jobId:{}},data:function(){return{job:new r["a"]}},watch:{jobId:function(t,s){this.fetchData()}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.job.startLoad(),o["a"].getJob(Number(this.jobId),!0).then((function(s){t.job.done(s)})).catch((function(s){t.job.failed(s)}))},getBreadcrumb:function(){var t=[],s=this.job.value?this.job.value.parentJob:null;while(s)t.push(s),s=s.parentJob;return t.reverse()},getClassName:function(){if(this.job.value){var t=this.job.value.classType;switch(t){case 0:return"";case 1:return"黑暗";case 2:return"光明";default:return String(t)}}return""},getClassType:function(){if(this.job.value){var t=this.job.value.classType;switch(t){case 0:return"";case 1:return"dark";case 2:return"light";default:return String(t)}}return""}}}),L=N,E=(e("06ca"),Object(b["a"])(L,a,i,!1,null,"6b8e59b5",null));s["default"]=E.exports},d741:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"error"},[e("div",{staticClass:"icon"},[e("i",{class:"fa "+t.iconClass})]),e("div",{staticClass:"head"},[t._v(" "+t._s(t.errorTitle)+" ")]),e("p",[t._v(" "+t._s(t.errorContent)+" ")]),t.secondaryInfo?e("p",{staticClass:"secondary"},[t._v(" "+t._s(t.secondaryInfo)+" ")]):t._e(),t.canRetry?e("button",{staticClass:"retry",on:{click:t.retry}},[t._v("Retry")]):t._e()])},i=[],n=e("2b0e"),r=n["a"].extend({props:{errorTitle:{type:String},errorContent:{type:String},iconClass:{type:String},secondaryInfo:{type:String},canRetry:{type:Boolean}},methods:{retry:function(){this.$emit("retry")}}}),o=r,c=(e("3116"),e("2877")),l=Object(c["a"])(o,a,i,!1,null,"01c78318",null);s["a"]=l.exports},da00:function(t,s,e){"use strict";e("2a47")},db8b:function(t,s,e){"use strict";e("c3fc")},ee68:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"jobs"},[e("h1",{staticClass:"divided"},[t._v("职业")]),e("a",{attrs:{href:"#scalings"}},[t._v("跳转到职业四维表")]),e("job-tree",{on:{done:t.onTreeLoaded}}),e("h1",{staticClass:"divided",attrs:{id:"scalings"}},[t._v("四维属性")]),t.treeLoaded?e("job-stat-grid"):t._e()],1)},i=[],n=e("2b0e"),r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"job-stat-grid"},[t.scalings.loading?e("div",{staticClass:"loading"},[e("loader",{attrs:{"load-text":"正在加载职业四维"}})],1):t._e(),e("div",{staticClass:"grid"},[e("transition",{attrs:{name:"fade"}},[t.groups.length?e("div",{staticClass:"scroll-notice"},[t._v(" 提示：可水平滑动查看 ")]):t._e()]),e("table",t._l(t.groups,(function(s){return e("tbody",{key:s.representative.id},[e("tr",{staticClass:"group-header"},[e("th",{staticClass:"job-name"},[e("sprite-icon",{attrs:{"icon-info":s.representative.icon,"size-override":26}}),e("ui-string",{staticClass:"job-name-text",attrs:{"message-data":s.representative.name,inline:!0}})],1),e("th",[t._v("力量→物攻")]),e("th",[t._v("敏捷→物攻")]),e("th",[t._v("智力→魔攻")]),t.isV0?[e("th",{staticClass:"critdmg"},[t._v("CRITDMG")])]:[e("th",{staticClass:"critdmg"},[t._v("力量→爆伤")]),e("th",{staticClass:"critdmg"},[t._v("敏捷→爆伤")]),e("th",{staticClass:"critdmg"},[t._v("智力→爆伤")])],e("th",[t._v("体质→HP")]),e("th",[t._v("体质→物防")]),e("th",[t._v("智力→魔防")]),e("th",[t._v("敏捷→暴击")])],2),t._l(s.children,(function(s){return e("tr",{key:s.id},[e("th",[e("router-link",{staticClass:"job-name",attrs:{to:{name:"job-view",params:{jobId:s.id}}}},[e("ui-string",{staticClass:"job-name-text",attrs:{"message-data":s.name,inline:!0}}),e("sprite-icon",{attrs:{"icon-info":s.icon,"size-override":18}})],1)],1),s.stats?[e("td",[t._v(t._s(s.stats.strToPhys))]),e("td",[t._v(t._s(s.stats.agiToPhys))]),e("td",[t._v(t._s(s.stats.intToMagic))]),t.isV0?[e("td",{staticClass:"critdmg"},[t._v(t._s(s.stats.strIntToCritDmg))])]:[e("td",{staticClass:"critdmg"},[t._v(t._s(s.stats.strToCritDmg))]),e("td",{staticClass:"critdmg"},[t._v(t._s(s.stats.agiToCritDmg))]),e("td",{staticClass:"critdmg"},[t._v(t._s(s.stats.intToCritDmg))])],e("td",[t._v(t._s(s.stats.vitToHp))]),e("td",[t._v(t._s(s.stats.vitToDef))]),e("td",[t._v(t._s(s.stats.intToMdef))]),e("td",[t._v(t._s(s.stats.agiToCrit))])]:t._e()],2)}))],2)})),0)],1)])},o=[],c=(e("4de4"),e("7db0"),e("4160"),e("d81d"),e("159b"),e("2909")),l=e("b85c"),d=e("bfe8"),u=e("e0b1"),v=e("40a3"),f=e("a1ad"),b=e("3bbf"),h=n["a"].extend({components:{Loader:v["a"],SpriteIcon:f["a"],UiString:b["a"]},data:function(){return{scalings:new d["a"],groups:[],isV0:!0}},mounted:function(){this.fetchData()},computed:{},methods:{fetchData:function(){var t=this;this.scalings.startLoad(),u["a"].getAllJobs().then((function(s){return t.groups=t.categorizeJobsByBase(s),u["a"].getAllJobsScaling()})).then((function(s){var e,a=Object(l["a"])(t.groups);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.children.forEach((function(e){e.stats=t.getScalingForJob(e.id,s)}))}}catch(n){a.e(n)}finally{a.f()}t.scalings.done(s),t.computeIsV0()}))},categorizeJobsByBase:function(t){var s=t.filter((function(t){return 0==t.jobNumber})).map((function(t){return{representative:t,children:[]}}));return s.forEach((function(s){var e,a=s.representative;(e=s.children).push.apply(e,Object(c["a"])(t.filter((function(t){return t.id!=a.id&&t.baseClass==a.baseClass&&2==t.jobNumber})).map((function(t){var s=t;return s.stats=null,s}))))})),s},getScalingForJob:function(t,s){return s.find((function(s){return s.jobId==t}))},computeIsV0:function(){var t=this.groups[0];if(t){var s=t.children[0];if(s&&s.stats)return void(this.isV0=1!==s.stats.scalingVersion)}this.isV0=!0}}}),g=h,_=(e("da00"),e("2877")),p=Object(_["a"])(g,r,o,!1,null,"b6c2a55a",null),m=p.exports,j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"job-tree"},[t.jobs.loading?e("div",{staticClass:"loading"},[e("loader",{attrs:{"load-text":"正在加载职业"}})],1):t.classes.length?e("div",{staticClass:"root"},t._l(t.classes,(function(s){return e("div",{key:s.base.id,staticClass:"base class"},[e("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:s.base.id}}}},[e("sprite-icon",{attrs:{"icon-info":s.base.icon}}),e("ui-string",{staticClass:"name",attrs:{"message-data":s.base.name}}),e("div",{staticClass:"jid"},[t._v(t._s(s.base.id))])],1),e("div",{staticClass:"first classes"},t._l(s.firsts,(function(s){return e("div",{key:s.first.id,staticClass:"first class",attrs:{"alt-type":s.first.classType}},[e("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:s.first.id}},"alt-type":s.first.classType,awakened:s.first.hasAwakening}},[e("sprite-icon",{attrs:{"icon-info":s.first.icon}}),e("ui-string",{staticClass:"name",attrs:{"message-data":s.first.name}}),e("div",{staticClass:"jid"},[t._v(t._s(s.first.id))])],1),e("div",{staticClass:"second classes"},t._l(s.seconds,(function(s){return e("div",{key:s.id,staticClass:"second class",attrs:{"alt-type":s.classType}},[e("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:s.id}},"alt-type":s.classType,awakened:s.hasAwakening}},[e("sprite-icon",{attrs:{"icon-info":s.icon}}),e("ui-string",{staticClass:"name",attrs:{"message-data":s.name}}),e("div",{staticClass:"jid"},[t._v(t._s(s.id))])],1)],1)})),0)],1)})),0)],1)})),0):t.jobs.error?e("div",{staticClass:"error"},[e("big-error-box",{attrs:{"error-title":"加载职业列表失败","error-content":t.jobs.error,"icon-class":"fa-exclamation-triangle","can-retry":!0},on:{retry:t.fetchData}})],1):t._e()])},C=[],y=e("d741"),k=e("c717"),I=n["a"].extend({components:{BigErrorBox:y["a"],Loader:v["a"],SpriteIcon:f["a"],UiString:b["a"]},data:function(){return{classes:[],jobs:new d["a"]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.jobs.startLoad(),u["a"].getAllJobs().then((function(s){t.classes=t.buildTree(s),t.jobs.done(s),t.$emit("done")}),(function(s){t.jobs.failed(Object(k["a"])(s))}))},buildTree:function(t){var s,e=t.filter((function(t){return 0==t.jobNumber})),a=[],i=Object(l["a"])(e);try{var n=function(){var e,i=s.value,n={base:i,firsts:[]},r=t.filter((function(t){return 1==t.jobNumber&&t.parentJobId==i.id})),o=Object(l["a"])(r);try{var c=function(){var s=e.value,a={first:s,seconds:t.filter((function(t){return 2==t.jobNumber&&t.parentJobId==s.id}))};n.firsts.push(a)};for(o.s();!(e=o.n()).done;)c()}catch(d){o.e(d)}finally{o.f()}a.push(n)};for(i.s();!(s=i.n()).done;)n()}catch(r){i.e(r)}finally{i.f()}return a}}}),x=I,T=(e("2bb7"),Object(_["a"])(x,j,C,!1,null,"9cb90776",null)),w=T.exports,S=n["a"].extend({components:{JobStatGrid:m,JobTree:w},data:function(){return{treeLoaded:!1}},methods:{onTreeLoaded:function(){this.treeLoaded=!0}}}),D=S,O=(e("1819"),Object(_["a"])(D,a,i,!1,null,"f26c53c6",null));s["default"]=O.exports}}]);
//# sourceMappingURL=jobs.691ddba1.js.map