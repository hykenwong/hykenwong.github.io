(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["jobs~monsters~old-items~skills"],{"0ccb":function(e,t,a){var n=a("50c4"),i=a("1148"),s=a("1d80"),r=Math.ceil,l=function(e){return function(t,a,l){var c,o,u=String(s(t)),f=u.length,v=void 0===l?" ":String(l),d=n(a);return d<=f||""==v?u:(c=d-f,o=i.call(v,r(c/v.length)),o.length>c&&(o=o.slice(0,c)),e?u+o:o+u)}};e.exports={start:l(!1),end:l(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),i=a("1d80");e.exports="".repeat||function(e){var t=String(i(this)),a="",s=n(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(a+=t);return a}},"466f":function(e,t,a){},"49a1":function(e,t,a){},"4c30":function(e,t,a){"use strict";a("99af"),a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("498a");var n,i,s=a("5530"),r=a("b85c"),l=(a("96cf"),a("1da1")),c=a("d4ec"),o=a("bee2"),u=a("ae36"),f=a("27c7"),v=a("3a0b"),d=a("6a9c"),p=a("e0b1");(function(e){e[e["NONE"]=-1]="NONE",e[e["FIRE"]=0]="FIRE",e[e["WATER"]=1]="WATER",e[e["LIGHT"]=2]="LIGHT",e[e["DARK"]=3]="DARK"})(n||(n={})),function(e){e["NONE"]="NONE",e["FIRE"]="FIRE",e["WATER"]="WATER",e["LIGHT"]="LIGHT",e["DARK"]="DARK"}(i||(i={}));var h=function(){function e(){Object(c["a"])(this,e),this._skillCache={},this._skillReqCache=new u["a"],this._skillLevelCache={},this._skillLevelReqCache=new u["a"],this._skillTreeCache={},this._skillTreeReqCache=new u["a"]}return Object(o["a"])(e,[{key:"getSkill",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var i,s,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this._ensureRegion(a),i=this._cacheKey(t,a),s=this._skillCache[i],!s){e.next=5;break}return e.abrupt("return",s);case 5:return e.abrupt("return",this._skillReqCache.tryCache(i,Object(l["a"])(regeneratorRuntime.mark((function e(){var i,s,l,o,u,v,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get("/skill.php?lan=".concat(a,"&id=").concat(t));case 2:i=e.sent,s=i.data,l=s,s.skillIcon=c._icon(l.skillIconIndex),s.buffIcon=c._buffIcon(l.buffIconIndex),s.debuffIcon=c._buffIcon(l.debuffIconIndex),s.elementStr=n[s.element],s.skillTypeStr=d["e"][s.skillType],o=Object(r["a"])(s.effects);try{for(o.s();!(u=o.n()).done;)v=u.value,v.effectApplyTypeStr=d["b"][v.effectApplyType]}catch(k){o.e(k)}finally{o.f()}return s.requiredJob&&(h=s.requiredJob,s.requiredJob.icon=p["a"].getIconInfo(h.iconIndex)),s.durationTypeStr=d["a"][s.durationType],s.targetTypeStr=d["d"][s.targetType],e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))));case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"searchSkillsByName",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var i,l,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this._ensureRegion(a),e.next=3,f["a"].get("searchskill.php?&lan=".concat(a,"&name=").concat(t));case 3:return i=e.sent,l=i.data.map((function(e){var t=e,a=Object(s["a"])({},e);a.skillIcon=c._icon(t.skillIconIndex),a.buffIcon=c._buffIcon(t.buffIconIndex),a.debuffIcon=c._buffIcon(t.debuffIconIndex),a.elementStr=n[a.element],a.skillTypeStr=d["e"][a.skillType];var i,l=Object(r["a"])(a.effects);try{for(l.s();!(i=l.n()).done;){var o=i.value;o.effectApplyTypeStr=d["b"][o.effectApplyType]}}catch(f){l.e(f)}finally{l.f()}if(a.requiredJob){var u=a.requiredJob;a.requiredJob.icon=p["a"].getIconInfo(u.iconIndex)}return a.durationTypeStr=d["a"][a.durationType],a.targetTypeStr=d["d"][a.targetType],a})),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"skillSlug",value:function(e){var t="".concat(e.id);return 0===e.name.id?e.internalName&&(t+="-".concat(e.internalName)):t+="-".concat(e.name.message.substr(0,60).trim().replace(/\s|\.|\/|\?/g,"-").replace(/[%]/g,"").replace(/-+/g,"-")),t}},{key:"_icon",value:function(e,t){-1==e&&(e=615);var a=200,n=Math.floor(e%a/10),i=e%10,s=Math.floor(e/a),r=50;t=this._ensureRegion(t);var l=(s+1).toString().padStart(2,"0"),c="".concat(f["a"].defaults.resourceURL,"dds/skillicon").concat(l,".png");return{x:Math.max(r*i,0),y:r*n,size:r,url:c,index:e}}},{key:"_buffIcon",value:function(e,t){if(-1!=e){var a=100,n=Math.floor(e/a),i=Math.floor(e%a/10),s=e%10,r=25;t=this._ensureRegion(t);var l=(n+1).toString().padStart(2,"0"),c="".concat(f["a"].defaults.resourceURL,"dds/bufficon").concat(l,".png");return{x:Math.max(r*s,0),y:r*i,size:r,url:c,index:e}}}},{key:"getSkillLevels",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a,n){var i,s,r,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this._ensureRegion(n),a=!!a,s=this._levelCacheKey(t,a,i),r=this._skillLevelCache[s],!r){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",this._skillLevelReqCache.tryCache(s,Object(l["a"])(regeneratorRuntime.mark((function e(){var n,r,l,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get("levelskill.php?lan=".concat(i,"&id=").concat(t));case 2:return n=e.sent,r=a?n.data.pvp:n.data.pve,l=a?n.data.pve:n.data.pvp,c._skillLevelCache[s]=r,o=c._levelCacheKey(t,!a,i),c._skillLevelCache[o]=l,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))));case 7:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"getSkillTreeInfo",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var i,s,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=this._ensureRegion(a),i=this._treeCacheKey(t,a),s=this._skillTreeCache[i],!s){e.next=5;break}return e.abrupt("return",s);case 5:return e.abrupt("return",this._skillTreeReqCache.tryCache(i,Object(l["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get("jobskill.php?lan=".concat(a,"&id=").concat(t));case 2:return s=e.sent.data,s.map((function(e){var t=e;t.skillIcon=c._icon(t.skillIconIndex),t.buffIcon=c._buffIcon(t.buffIconIndex),t.debuffIcon=c._buffIcon(t.debuffIconIndex),t.elementStr=n[t.element],t.skillTypeStr=d["e"][t.skillType];var a,i=Object(r["a"])(t.effects);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.effectApplyTypeStr=d["b"][s.effectApplyType]}}catch(o){i.e(o)}finally{i.f()}if(t.requiredJob){var l=t.requiredJob;t.requiredJob.icon=p["a"].getIconInfo(l.iconIndex)}return t.durationTypeStr=d["a"][t.durationType],t.targetTypeStr=d["d"][t.targetType],t.skillId=t._SkillTableID,t.tab=t._SkillTapID,t.index=t._TreeSlotIndex,t.isAwakened=t._AwakenForceLevel,t})),c._skillTreeCache[i]=s,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))));case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"_ensureRegion",value:function(e){return e||v["a"].state.regionCode}},{key:"_cacheKey",value:function(e,t){return"".concat(t,":").concat(e)}},{key:"_levelCacheKey",value:function(e,t,a){return"".concat(a,":").concat(e,":").concat(t?1:0)}},{key:"_treeCacheKey",value:function(e,t){return"".concat(t,":").concat(e)}}]),e}();t["a"]=new h},"4d90":function(e,t,a){"use strict";var n=a("23e7"),i=a("0ccb").start,s=a("9a0c");n({target:"String",proto:!0,forced:s},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9207:function(e,t,a){"use strict";a("49a1")},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a1ad:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sprite-icon-wrapper",style:"width: "+e.sizePx+"px; height: "+e.sizePx+"px;"},[a("div",{staticClass:"sprite-icon-resize",style:"transform: scale("+e.resize+")"},[a("div",{staticClass:"sprite-icon",style:"width: "+e.iconInfo.size+"px; height: "+e.iconInfo.size+"px;"},[a("div",{staticClass:"sprite",style:"background:url("+e.iconInfo.url+") -"+e.iconInfo.x+"px -"+e.iconInfo.y+"px;"})])])])},i=[],s=(a("a9e3"),a("2b0e")),r=s["a"].extend({props:{iconInfo:{type:Object},sizeOverride:{type:Number}},computed:{resize:function(){if(this.sizeOverride){var e=Number(this.sizeOverride);return Math.floor(e/this.iconInfo.size*100)/100}return 1},sizePx:function(){return this.iconInfo.size*this.resize}}}),l=r,c=(a("f69d"),a("2877")),o=Object(c["a"])(l,n,i,!1,null,"598af8ac",null);t["a"]=o.exports},a93b:function(e,t,a){},ca98:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"stubRoot",staticClass:"skill-stub",attrs:{fill:e.fill},on:{mouseenter:e.onHoverIn,mouseleave:e.onHoverOut}},[e.skill.isSuccess()&&e.skill.value?a("div",{staticClass:"info",attrs:{type:e.skillTypeToString(e.skill.value.skillType)}},[a("div",{staticClass:"icon"},[a("div",{staticClass:"skill-icon"},[0==e.skill.value.skillIcon.index&&e.skill.value.buffIcon&&0!=e.skill.value.buffIcon.index?a("sprite-icon",{attrs:{"icon-info":e.skill.value.buffIcon}}):0==e.skill.value.skillIcon.index&&e.skill.value.debuffIcon&&0!=e.skill.value.debuffIcon.index?a("sprite-icon",{attrs:{"icon-info":e.skill.value.debuffIcon}}):a("sprite-icon",{attrs:{"icon-info":e.skill.value.skillIcon}})],1)]),e.iconOnly?e._e():a("div",{staticClass:"detail"},[a("div",{staticClass:"id"},[e._v(" "+e._s(e.skill.value.id)+" ")]),a("div",{staticClass:"name"},[e._v(" "+e._s(e.skill.value.name.message)+" ")]),a("div",{staticClass:"details"},[e.skill.value.requiredJob?a("div",{staticClass:"job"},[a("div",{staticClass:"class-icon"},[a("sprite-icon",{attrs:{"icon-info":e.skill.value.requiredJob.icon,"size-override":16}})],1),e._v(" "+e._s(e.skill.value.requiredJob.name.message)+" ")]):e._e(),e.skill.value.skillType==e.SkillType.ACTIVE?a("div",[e._v(" 主动技能 ")]):e.skill.value.skillType==e.SkillType.PASSIVE?a("div",[e._v(" 被动技能 ")]):e.skill.value.skillType==e.SkillType.AUTOMATIC_PASSIVE?a("div",[e._v(" 自动被动技能 ")]):e.skill.value.skillType==e.SkillType.EX_PASSIVE?a("div",[e._v(" EX技能 ")]):e.skill.value.skillType==e.SkillType.AUTOMATIC_ACTIVATION?a("div",[e._v(" 自动技能 ")]):e._e(),-1!=e.skill.value.element?a("div",{staticClass:"element"},["FIRE"==e.skill.value.elementStr?a("i",{staticClass:"fa fa-fire fire"}):"WATER"==e.skill.value.elementStr?a("i",{staticClass:"fa fa-snowflake-o ice"}):"LIGHT"==e.skill.value.elementStr?a("i",{staticClass:"fa fa-bolt light"}):"DARK"==e.skill.value.elementStr?a("i",{staticClass:"fa fa-adjust dark"}):e._e()]):e._e()])])]):e.skill.error?a("div",{staticClass:"error info"},[e._m(0),a("div",{staticClass:"detail"},[a("div",{staticClass:"id"},[e._v(" "+e._s(e.skillId)+" ")]),a("div",{staticClass:"name"},[e._v(" Skill data error ")])])]):a("div",{staticClass:"loading"},[a("div",{staticClass:"load-content"},[a("loader",{attrs:{"load-text":"Skill "+e.skillId}})],1)]),e.isHover?a("div",{staticClass:"tooltip"},[a("skill-stub-tooltip",{attrs:{"skill-data":e.skill.value,show:!0}})],1):e._e()])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon"},[a("div",{staticClass:"skill-icon"},[a("i",{staticClass:"fa fa-exclamation-triangle"})])])}],s=(a("a9e3"),a("96cf"),a("1da1")),r=a("2b0e"),l=a("bfe8"),c=a("4c30"),o=a("a1ad"),u=a("40a3"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"skill-stub-tooltip",attrs:{show:e.show,type:e.skillTypeToString(e.skillData.skillType)}},[a("div",{staticClass:"skill-name"},[a("div",{staticClass:"skill-icon"},[0==e.skillData.skillIcon.index&&e.skillData.buffIcon&&0!=e.skillData.buffIcon.index?a("sprite-icon",{attrs:{"icon-info":e.skillData.buffIcon}}):0==e.skillData.skillIcon.index&&e.skillData.debuffIcon&&0!=e.skillData.debuffIcon.index?a("sprite-icon",{attrs:{"icon-info":e.skillData.debuffIcon}}):a("sprite-icon",{attrs:{"icon-info":e.skillData.skillIcon}})],1),e._v(" "+e._s(e.skillData.name.message)+" ")]),a("div",{staticClass:"info-list"},[e.skillData.requiredJob?a("div",{staticClass:"job entry"},[a("div",{staticClass:"key"},[e._v("职业: ")]),a("div",{staticClass:"value"},[a("div",{staticClass:"class-icon"},[a("sprite-icon",{attrs:{"icon-info":e.skillData.requiredJob.icon,"size-override":16}})],1),e._v(" "+e._s(e.skillData.requiredJob.name.message)+" ")])]):e._e(),a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("技能类型: ")]),a("div",{staticClass:"value"},[e.skillData.skillType==e.SkillType.ACTIVE?a("div",[e._v(" 主动技能 ")]):e.skillData.skillType==e.SkillType.PASSIVE?a("div",[e._v(" 被动技能 ")]):e.skillData.skillType==e.SkillType.AUTOMATIC_PASSIVE?a("div",[e._v(" 自动触发被动 ")]):e.skillData.skillType==e.SkillType.EX_PASSIVE?a("div",[e._v(" EX技能 ")]):e.skillData.skillType==e.SkillType.AUTOMATIC_ACTIVATION?a("div",[e._v(" 自动触发 ")]):e.skillData.skillType==e.SkillType.HERO?a("div",[e._v(" 英雄技能 ")]):e._e()])]),a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("应用类型: ")]),a("div",{staticClass:"value"},["INSTANT"==e.skillData.durationTypeStr?a("span",[e._v("常规技能")]):"BUFF"==e.skillData.durationTypeStr?a("span",[e._v("增益技能")]):"DEBUFF"==e.skillData.durationTypeStr?a("span",[e._v("减益技能")]):"TIMED_TOGGLE"==e.skillData.durationTypeStr?a("span",[e._v("时间切换")]):"ACTIVE_TOGGLE"==e.skillData.durationTypeStr?a("span",[e._v("主动切换")]):"AURA"==e.skillData.durationTypeStr?a("span",[e._v("光环")]):"ACTIVE_TOGGLE_PET"==e.skillData.durationTypeStr?a("span",[e._v("宠物召唤技能")]):"SUMMON_DESUMMON_PET"==e.skillData.durationTypeStr?a("span",[e._v("召唤技能")]):"CHANGE_STANCE"==e.skillData.durationTypeStr?a("span",[e._v("站姿转换")]):"UNIFIED_SKILL"==e.skillData.durationTypeStr?a("span",[e._v("综合技能")]):e._e()])]),a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("应用目标: ")]),a("div",{staticClass:"value"},["SELF"==e.skillData.targetTypeStr?a("span",[e._v("施法者")]):"ENEMY"==e.skillData.targetTypeStr?a("span",[e._v("敌人")]):"ALLIED"==e.skillData.targetTypeStr?a("span",[e._v("友军单位")]):"PARTY_MEMBERS"==e.skillData.targetTypeStr?a("span",[e._v("队伍成员")]):"ALL"==e.skillData.targetTypeStr?a("span",[e._v("全体成员")]):e._e()])]),-1!=e.skillData.element?a("div",{staticClass:"element entry"},[a("div",{staticClass:"key"},[e._v("元素属性: ")]),a("div",{staticClass:"value"},["FIRE"==e.skillData.elementStr?a("div",{staticClass:"fire"},[a("i",{staticClass:"fa fa-fire"}),e._v(" 火")]):e._e(),"WATER"==e.skillData.elementStr?a("div",{staticClass:"ice"},[a("i",{staticClass:"fa fa-snowflake-o"}),e._v(" 水")]):e._e(),"LIGHT"==e.skillData.elementStr?a("div",{staticClass:"light"},[a("i",{staticClass:"fa fa-bolt"}),e._v(" 光")]):e._e(),"DARK"==e.skillData.elementStr?a("div",{staticClass:"dark"},[a("i",{staticClass:"fa fa-adjust"}),e._v(" 暗")]):e._e()])]):e._e(),a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("最大技能等级: ")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e.skillData.spLevels)),e.skillData.techLevels>0?a("span",[e._v(" (可技巧加点 +"+e._s(e.skillData.techLevels)+")")]):e._e()])]),e.skillData.globalCooldownPvE?a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("共享冷却: ")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e._f("milliseconds")(e.skillData.globalCooldownPvE))+"s ")])]):e._e(),e.skillData.buffIcon&&-1!=e.skillData.buffIcon.index?a("div",{staticClass:"buff entry"},[a("div",{staticClass:"key"},[e._v("Buff图标: ")]),a("div",{staticClass:"value"},[a("sprite-icon",{attrs:{"icon-info":e.skillData.buffIcon}})],1)]):e._e(),e.skillData.debuffIcon&&-1!=e.skillData.debuffIcon.index?a("div",{staticClass:"debuff entry"},[a("div",{staticClass:"key"},[e._v("Debuff图标: ")]),a("div",{staticClass:"value"},[a("sprite-icon",{attrs:{"icon-info":e.skillData.debuffIcon}})],1)]):e._e(),e.firstLevel?[e.firstLevel.requiredLevel>1?a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("学习等级: ")]),a("div",{staticClass:"value"},[e._v(" Lv "+e._s(e.firstLevel.requiredLevel)+" ")])]):e._e(),a("div",{staticClass:"at-level"},[e._v(" 等级 "+e._s(e.maxLevel.level)+" ")]),e.maxLevel.cooldown>0?a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("冷却时间: ")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e._f("milliseconds")(e.maxLevel.cooldown))+"s ")])]):e._e(),a("div",{staticClass:"desc"},[a("div",{domProps:{innerHTML:e._s(e.maxLevel.skillDesc.message)}})])]:e.fetched?a("div",{staticClass:"error"},[e._v(" 加载技能失败 ")]):a("div",{staticClass:"loading"},[a("div",{staticClass:"loading-blinker"}),e._v(" 正在载入技能信息... ")]),e._e()],2)])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"entry"},[a("div",{staticClass:"key"},[e._v("Template: ")]),a("div",{staticClass:"value"},[e._v(" Value ")])])}],d=(a("7db0"),a("2909")),p=a("6a9c"),h=a("1b9a"),k=r["a"].extend({components:{SpriteIcon:o["a"]},props:{skillData:{type:Object},show:{type:Boolean}},data:function(){return{skillLevelData:[],fetched:!1}},watch:{show:function(e,t){e!=t&&(e?(this.fetched||this.fetchData(),this.$anime({targets:".skill-stub-tooltip",opacity:"1.0"})):this.$anime({targets:".skill-stub-tooltip",opacity:"0.0"}))},skillData:function(){this.fetched=!1,this.skillLevelData=[]}},computed:{SkillType:function(){return p["e"]},firstLevel:function(){return this.skillLevelData.find((function(e){return 1==e.level}))||this.skillLevelData.length>0?this.skillLevelData[0]:null},maxLevel:function(){var e=this;return this.skillLevelData.find((function(t){return t.level==e.skillData.spLevels}))||this.firstLevel}},mounted:function(){this.show&&this.fetchData()},methods:{fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.skillLevelData=[],t.t0=(a=e.skillLevelData).push,t.t1=a,t.t2=d["a"],t.next=6,c["a"].getSkillLevels(e.skillData.id);case 6:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4),e.fetched=!0;case 10:case"end":return t.stop()}}),t)})))()},skillTypeToString:function(e){return h["filters"].skillType(e)}}}),b=k,_=(a("d092"),a("2877")),y=Object(_["a"])(b,f,v,!1,null,"634d05f8",null),g=y.exports,m=a("2ef0"),C=r["a"].extend({props:{skillId:{type:Number},fill:{type:Boolean},skillData:{type:Object},iconOnly:{type:Boolean}},components:{SpriteIcon:o["a"],Loader:u["a"],SkillStubTooltip:g},data:function(){return{skill:new l["a"],isHover:!1,hoverIn:function(){},hoverOut:function(){}}},watch:{skillId:function(){this.fetchData()},skillData:function(){this.fetchData()}},mounted:function(){var e=this;this.hoverIn=Object(m["debounce"])((function(){e.isHover=!0}),250),this.hoverOut=Object(m["debounce"])((function(){e.isHover=!1}),500),this.fetchData()},computed:{SkillType:function(){return p["e"]}},methods:{fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.skillData){t.next=4;break}return e.skill.done(e.skillData),e.$emit("done",e.skill.value),t.abrupt("return");case 4:return e.skill.startLoad(),t.prev=5,t.next=8,c["a"].getSkill(e.skillId);case 8:a=t.sent,e.skill.done(a),e.$emit("done",e.skill.value),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),e.skill.failed(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})))()},skillTypeToString:function(e){return h["filters"].skillType(e)},onHoverIn:function(){this.isHover=!0},onHoverOut:function(e){this.isHover=!1}}}),T=C,I=(a("ef7f"),Object(_["a"])(T,n,i,!1,null,"6a650af7",null));t["a"]=I.exports},d092:function(e,t,a){"use strict";a("a93b")},d410:function(e,t,a){},db4b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"skill-stub-wrapper"},[a("router-link",{staticClass:"skill-stub-link",attrs:{to:"/skills/"+e.linkTarget,fill:e.fill}},[a("skill-stub",{attrs:{"skill-id":e.skillId,fill:e.fill,"skill-data":e.skillData,"icon-only":e.iconOnly},on:{done:e.onLoaded}})],1)],1)},i=[],s=(a("a9e3"),a("2b0e")),r=a("ca98"),l=a("4c30"),c=s["a"].extend({props:{skillId:{type:Number},fill:{type:Boolean},skillData:{type:Object},iconOnly:{type:Boolean}},components:{SkillStub:r["a"]},data:function(){return{linkTarget:"".concat(this.skillId)}},methods:{onLoaded:function(e){this.linkTarget=l["a"].skillSlug(e),this.$emit("done",e)}}}),o=c,u=(a("9207"),a("2877")),f=Object(u["a"])(o,n,i,!1,null,"5de143db",null);t["a"]=f.exports},e0b1:function(e,t,a){"use strict";a("99af"),a("4de4"),a("4160"),a("a15b"),a("d81d"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0");var n=a("5530"),i=a("2909"),s=a("b85c"),r=(a("96cf"),a("1da1")),l=a("d4ec"),c=a("bee2"),o=a("ae36"),u=a("27c7"),f=a("3a0b"),v=function(){function e(){Object(l["a"])(this,e),this._jobsCache={},this._requestCache=new o["a"],this._allJobRequestCache=new o["a"],this._allJobsCache={},this._jobStatCache={},this._statRequestCache=new o["a"]}return Object(c["a"])(e,[{key:"getJob",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,s,l,c=this,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],n=o.length>2?o[2]:void 0,n=this._ensureRegion(n),i=this._cacheKey(t,n),s=this._jobsCache[i],!s){e.next=12;break}if(l=Object.assign({},s),!a||0==l.parentJobId){e.next=11;break}return e.next=10,this.getJob(l.parentJobId,!0,n);case 10:l.parentJob=e.sent;case 11:return e.abrupt("return",Promise.resolve(l));case 12:return e.abrupt("return",this._requestCache.tryCache(i,Object(r["a"])(regeneratorRuntime.mark((function e(){var s,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("job.php?lan=".concat(n,"&id=").concat(t),{params:{parent:!!a||void 0}});case 2:return s=e.sent,r=s.data,l=c._rawApiResultToData(r,n),c._jobsCache[i]=l,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})))));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJobs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,l,c,o,f,v,d,p,h,k,b,_=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this._ensureRegion(a),r=[],l=[],c=[],o=Object(s["a"])(t);try{for(o.s();!(f=o.n()).done;)v=f.value,d=this._cacheKey(v,a),p=this._jobsCache[d],p?l.push(p):c.push(v)}catch(y){o.e(y)}finally{o.f()}if(r=(n=r).concat.apply(n,Object(i["a"])(l.map((function(e){return Promise.resolve(e)})))),1!=c.length){e.next=11;break}r.push(this.getJob(c[0],!1,a)),e.next=19;break;case 11:if(!(c.length>1)){e.next=19;break}return h=c.join(","),e.next=15,u["a"].get("server/".concat(a,"/jobs/").concat(h),{}).then((function(e){return e.data}));case 15:k=e.sent,b=k.map((function(e){return _._rawApiResultToData(e,a)})).filter((function(e){return null!=e})),b.forEach((function(e){var t=_._cacheKey(e.id,a);_._jobsCache[t]=e})),r=r.concat(b.map((function(e){return Promise.resolve(e)})));case 19:return e.abrupt("return",Promise.all(r).then((function(e){return e.filter((function(e){return null!=e}))})));case 20:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getAllJobs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._ensureRegion(t),a=this._allJobsCache[t],!a){e.next=4;break}return e.abrupt("return",a);case 4:return e.abrupt("return",this._allJobRequestCache.tryCache("",Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("job.php?lan=".concat(t),{});case 2:return a=e.sent,i=a.data,s=i.map((function(e){return n._rawApiResultToData(e,t)})).filter((function(e){return null!=e})),s.forEach((function(e){var a=n._cacheKey(e.id,t);n._jobsCache[a]=e})),n._allJobsCache[t]=s,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getIconInfo",value:function(e,t){var a=Math.floor(e/9),n=e%9,i=55;return{x:Math.max(i*n,0),y:i*a,size:i,url:this._getIconUrl(t),index:e}}},{key:"getJobScaling",value:function(e,t){var a=this;t=this._ensureRegion(t);var n=this._cacheKey(e,t),i=this._jobStatCache[n];return i?Promise.resolve(i):this._statRequestCache.tryCache(n,Object(r["a"])(regeneratorRuntime.mark((function i(){var s,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,u["a"].get("scaling.php?lan=".concat(t,"&id=").concat(e),{});case 2:return s=i.sent,r=s.data,a._jobStatCache[n]=r,i.abrupt("return",r);case 6:case"end":return i.stop()}}),i)}))))}},{key:"getJobsScaling",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,l,c,o,f,v,d,p,h,k,b=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this._ensureRegion(a),r=[],l=[],c=[],o=Object(s["a"])(t);try{for(o.s();!(f=o.n()).done;)v=f.value,d=this._cacheKey(v,a),p=this._jobStatCache[d],p?l.push(p):c.push(v)}catch(_){o.e(_)}finally{o.f()}if(r=(n=r).concat.apply(n,Object(i["a"])(l.map((function(e){return Promise.resolve(e)})))),1!=c.length){e.next=11;break}r.push(this.getJobScaling(c[0],a)),e.next=18;break;case 11:if(!(c.length>1)){e.next=18;break}return h=c.join(","),e.next=15,u["a"].get("server/".concat(a,"/tables/rebootplayerweighttable/").concat(h),{}).then((function(e){return e.data}),(function(e){return null})).then((function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]})).then((function(e){return e.map((function(e){return b._scalingDataToObject(e)}))}));case 15:k=e.sent,k.forEach((function(e){var t=b._cacheKey(e.jobId,a);b._jobStatCache[t]=e})),r=r.concat(k.map((function(e){return Promise.resolve(e)})));case 18:return e.abrupt("return",Promise.all(r).then((function(e){return e.filter((function(e){return null!=e}))})));case 19:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getAllJobsScaling",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this._ensureRegion(t),e.next=3,u["a"].get("scaling.php?lan=".concat(t),{});case 3:return a=e.sent,n=a.data,n.forEach((function(e){var a=i._cacheKey(e.jobId,t);i._jobStatCache[a]=e})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getIconUrl",value:function(e){return e=this._ensureRegion(e),"".concat(u["a"].defaults.resourceURL,"/dds/jobicon_main.png")}},{key:"_ensureRegion",value:function(e){return e||f["a"].state.regionCode}},{key:"_cacheKey",value:function(e,t){return"".concat(t,":").concat(e)}},{key:"_rawApiResultToData",value:function(e,t){return e?Object(n["a"])(Object(n["a"])({icon:this.getIconInfo(e.iconIndex,t)},e),{},{parentJob:this._rawApiResultToData(e.parentJob,t)}):null}},{key:"_scalingDataToObject",value:function(e){var t={jobId:e.id,vitToHp:e._HP,vitToDef:e._PhysicalDefense,agiToPhys:e._AgilityAttack,intToMagic:e._IntelligenceAttack,intToMdef:e._MagicDefense,strToPhys:e._StrengthAttack,scalingVersion:void 0};if(e._StrengthIntelligenceToCriticalDamage){t.scalingVersion=0;var a=t;a.strIntToCritDmg=e._StrengthIntelligenceToCriticalDamage,a.agiToCrit=e._Critical}else{t.scalingVersion=1;var n=t;n.strToCritDmg=e._StrengthToCriticalDamage,n.agiToCritDmg=e._AgilityToCriticalDamage,n.intToCritDmg=e._IntelligenceToCriticalDamage}return t}}]),e}();t["a"]=new v},ef7f:function(e,t,a){"use strict";a("466f")},f69d:function(e,t,a){"use strict";a("d410")}}]);
//# sourceMappingURL=jobs~monsters~old-items~skills.dd27de25.js.map