(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["jobs"],{"06ca":function(t,e,s){"use strict";s("bb1e")},"07d6":function(t,e,s){},"098b":function(t,e,s){},1819:function(t,e,s){"use strict";s("8e56")},"1f0e":function(t,e,s){"use strict";s("07d6")},2909:function(t,e,s){"use strict";var a=s("6b75");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("d3b7"),s("3ca3"),s("ddb0");function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=s("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||n(t)||Object(r["a"])(t)||o()}s.d(e,"a",(function(){return c}))},"2a47":function(t,e,s){},"2bb7":function(t,e,s){"use strict";s("5438")},"2e1f":function(t,e,s){},3116:function(t,e,s){"use strict";s("098b")},5438:function(t,e,s){},"81a9":function(t,e,s){"use strict";s("2e1f")},"8e56":function(t,e,s){},bb1e:function(t,e,s){},c3fc:function(t,e,s){},c717:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("99af");var a=s("53ca");function i(t){if("object"!==Object(a["a"])(t))return String(t);if(t.response){var e=t,s=e.response,i="HTTP ".concat(s.status," ").concat(s.statusText);return i+=": ".concat(s.data),i}return"请求失败"}},d3e5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"job-view"},[t.job.loading?s("div",{staticClass:"loading"},[s("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.job.isSuccess()&&t.job.value?s("div",{staticClass:"result"},[s("div",{staticClass:"breadcrumb"},[s("router-link",{staticClass:"breadcrumb-entry",attrs:{to:{name:"jobs"}}},[t._v(" 职业列表 ")]),t._l(t.getBreadcrumb(),(function(t){return s("router-link",{key:t.id,staticClass:"breadcrumb-entry",attrs:{to:{name:"job-view",params:{jobId:t.id}}}},[s("sprite-icon",{attrs:{"icon-info":t.icon,"size-override":20}}),s("ui-string",{attrs:{"message-data":t.name,inline:!0}})],1)}))],2),s("div",{staticClass:"header"},[s("div",{staticClass:"icon"},[s("sprite-icon",{attrs:{"icon-info":t.job.value.icon}})],1),s("div",{staticClass:"title"},[s("div",{staticClass:"remark"},[s("span",{staticClass:"id"},[t._v("#"+t._s(t.jobId))])]),s("h2",{staticClass:"head"},[s("ui-string",{staticClass:"name",attrs:{"message-data":t.job.value.name}})],1),s("div",{staticClass:"remark"},[0==t.job.value.jobNumber?s("span",{staticClass:"base"},[t._v("基础职业")]):s("span",{class:"spec spec-"+t.job.value.jobNumber},[t._v(t._s(t.job.value.jobNumber)+" 转")]),0!=t.job.value.classType?s("span",{class:"spinoff "+t.getClassType()},[t._v(" "+t._s(t.getClassName())+"外传 ")]):t._e(),t.job.value.hasAwakening?s("span",{staticClass:"awakened"},[t._v("觉醒 ")]):t._e(),s("span",{staticClass:"type"},[t._v(t._s(t.job.value.mainStatString.message)+" ")])])])]),t.job.value.jobDescription.id?s("div",{staticClass:"dv-section"},[s("div",{staticClass:"dividing title"},[t._v(" 描述 ")]),s("i",[s("ui-string",{attrs:{"message-data":t.job.value.jobDescription}})],1)]):t._e(),s("div",{staticClass:"dv-section"},[s("div",{staticClass:"dividing title"},[t._v(" 职业四维 ")]),s("job-stat-scaling",{attrs:{"job-id":t.job.value.id}})],1),s("div",{staticClass:"dv-section"},[s("div",{staticClass:"dividing title"},[t._v(" 技能树 ")]),s("skill-tree",{attrs:{"job-id":t.job.value.id}})],1),s("p",[t._v(" 其他额外功能和信息在开发中。 ")])]):t._e()])},i=[],n=(s("a9e3"),s("2b0e")),r=s("bfe8"),o=s("e0b1"),c=s("a1ad"),l=s("40a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"job-stat-scaling"},[t.scaling.loading?s("div",{staticClass:"loading"},[s("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.scaling.isSuccess()&&t.scaling.value?s("div",{staticClass:"result"},[s("div",{staticClass:"two-col"},[s("table",{staticClass:"col"},[t._m(0),s("tbody",[s("tr",[s("th",[t._v("力量→物攻")]),s("td",[t._v(t._s(t.scaling.value.strToPhys))])]),s("tr",[s("th",[t._v("敏捷→物攻")]),s("td",[t._v(t._s(t.scaling.value.agiToPhys))])]),s("tr",[s("th",[t._v("智力→魔攻")]),s("td",[t._v(t._s(t.scaling.value.intToMagic))])]),t.scaling.value.scalingVersion?[s("tr",[s("th",[t._v("力量→爆伤")]),s("td",[t._v(t._s(t.scaling.value.strToCritDmg))])]),s("tr",[s("th",[t._v("敏捷→爆伤")]),s("td",[t._v(t._s(t.scaling.value.agiToCritDmg))])]),s("tr",[s("th",[t._v("智力→爆伤")]),s("td",[t._v(t._s(t.scaling.value.intToCritDmg))])])]:[s("tr",[s("th",[t._v("力量→爆伤+INT")]),s("td",[t._v(t._s(t.scaling.value.strIntToCritDmg))])])]],2)]),s("table",{staticClass:"col"},[t._m(1),s("tbody",[s("tr",[s("th",[t._v("体质→HP")]),s("td",[t._v(t._s(t.scaling.value.vitToHp))])]),s("tr",[s("th",[t._v("体质→物防")]),s("td",[t._v(t._s(t.scaling.value.vitToDef))])]),s("tr",[s("th",[t._v("智力→魔防")]),s("td",[t._v(t._s(t.scaling.value.intToMdef))])]),s("tr",[s("th",[t._v("敏捷→暴击")]),s("td",[t._v(t._s(t.scaling.value.agiToCrit))])])])])])]):t._e()])},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",[t._v("属性")]),s("th",[t._v("值")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",[t._v("属性")]),s("th",[t._v("值")])])}],v=n["a"].extend({components:{Loader:l["a"]},props:{jobId:{type:Number}},data:function(){return{scaling:new r["a"]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.scaling.startLoad(),o["a"].getJobScaling(this.jobId).then((function(e){t.scaling.done(e)})).catch((function(e){t.scaling.failed(e)}))}}}),f=v,b=(s("81a9"),s("2877")),h=Object(b["a"])(f,d,u,!1,null,"3d06648a",null),g=h.exports,_=s("3bbf"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"skill-tree"},[t.tree.loading?s("div",{staticClass:"loading"},[s("loader",{attrs:{"load-text":"正在加载职业"}})],1):t._e(),t.tree.isSuccess()&&t.tree.value?s("div",{staticClass:"result"},[s("div",{staticClass:"skill-grid"},[t.jobInfo?s("div",{staticClass:"grid-head"},[t._v(t._s(t.jobInfo.name.message))]):t._e(),s("div",{staticClass:"grid-body"},t._l(t.slots,(function(e,a){return s("div",{key:"sk-"+a,staticClass:"grid-entry"},[e?[s("skill-stub-link",{attrs:{skillId:e.skillId,skillData:e,iconOnly:!0}})]:t._e()],2)})),0)]),t.awakeningSkills.length?[s("div",{staticClass:"skill-grid"},[s("div",{staticClass:"grid-head"},[t._v("觉醒")]),s("div",{staticClass:"grid-body"},t._l(t.awakeningSlots,(function(e,a){return s("div",{key:"sk-"+a,staticClass:"grid-entry"},[e?[s("skill-stub-link",{attrs:{skillId:e.skillId,skillData:e,iconOnly:!0}})]:t._e()],2)})),0)])]:t._e()],2):t._e()])},m=[],j=(s("4de4"),s("7db0"),s("96cf"),s("1da1")),C=s("4c30"),y=s("db4b"),k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"job-icon-wrapper",style:"width: "+t.sizePx+"px; height: "+t.sizePx+"px;"},[s("div",{staticClass:"job-icon-resize",style:"transform: scale("+t.resize+")"},[s("div",{staticClass:"job-icon",style:"width: "+t.iconInfo.size+"px; height: "+t.iconInfo.size+"px;"},[s("div",{staticClass:"job",style:"background:url("+t.iconInfo.url+") -"+t.iconInfo.x+"px -"+t.iconInfo.y+"px;"})])])])},I=[],w=n["a"].extend({props:{iconInfo:{type:Object},sizeOverride:{type:Number}},computed:{resize:function(){if(this.sizeOverride){var t=Number(this.sizeOverride);return Math.floor(t/this.iconInfo.size*100)/100}return 1},sizePx:function(){return this.iconInfo.size*this.resize}}}),T=w,x=(s("1f0e"),Object(b["a"])(T,k,I,!1,null,"1fec35a9",null)),S=x.exports,D=n["a"].extend({components:{Loader:l["a"],SkillStubLink:y["a"],JobIcon:S},props:{jobId:{type:Number}},data:function(){return{tree:new r["a"],jobInfo:null}},computed:{skills:function(){return this.tree.value?this.jobInfo&&2===this.jobInfo.jobNumber?this.tree.value.filter((function(t){return!t.isAwakened})):this.tree.value:[]},slots:function(){for(var t=this,e=[],s=function(s){e[s]=t.skills.find((function(t){return t.index===s}))||null},a=0;a<28;++a)s(a);return e},awakeningSkills:function(){return this.tree.value&&this.jobInfo&&2===this.jobInfo.jobNumber?this.tree.value.filter((function(t){return t.isAwakened})):[]},awakeningSlots:function(){for(var t=this,e=[],s=function(s){e[s]=t.awakeningSkills.find((function(t){return t.index===s}))||null},a=0;a<28;++a)s(a);return e}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tree.startLoad(),e.prev=1,t.jobInfo=null,e.prev=3,e.next=6,o["a"].getJob(t.jobId);case 6:t.jobInfo=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),console.log("Failed to load job",e.t0);case 12:return e.t1=t.tree,e.next=15,C["a"].getSkillTreeInfo(t.jobId);case 15:e.t2=e.sent,e.t1.done.call(e.t1,e.t2),e.next=23;break;case 19:e.prev=19,e.t3=e["catch"](1),console.log(e.t3),t.tree.failed(e.t3);case 23:case"end":return e.stop()}}),e,null,[[1,19],[3,9]])})))()},fetchJob:function(){return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}}),O=D,J=(s("db8b"),Object(b["a"])(O,p,m,!1,null,"196b952f",null)),z=J.exports,N=n["a"].extend({components:{Loader:l["a"],SpriteIcon:c["a"],JobStatScaling:g,UiString:_["a"],SkillTree:z},props:{jobId:{}},data:function(){return{job:new r["a"]}},watch:{jobId:function(t,e){this.fetchData()}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.job.startLoad(),o["a"].getJob(Number(this.jobId),!0).then((function(e){t.job.done(e)})).catch((function(e){t.job.failed(e)}))},getBreadcrumb:function(){var t=[],e=this.job.value?this.job.value.parentJob:null;while(e)t.push(e),e=e.parentJob;return t.reverse()},getClassName:function(){if(this.job.value){var t=this.job.value.classType;switch(t){case 0:return"";case 1:return"黑暗";case 2:return"光明";default:return String(t)}}return""},getClassType:function(){if(this.job.value){var t=this.job.value.classType;switch(t){case 0:return"";case 1:return"dark";case 2:return"light";default:return String(t)}}return""}}}),L=N,E=(s("06ca"),Object(b["a"])(L,a,i,!1,null,"6b8e59b5",null));e["default"]=E.exports},d741:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error"},[s("div",{staticClass:"icon"},[s("i",{class:"fa "+t.iconClass})]),s("div",{staticClass:"head"},[t._v(" "+t._s(t.errorTitle)+" ")]),s("p",[t._v(" "+t._s(t.errorContent)+" ")]),t.secondaryInfo?s("p",{staticClass:"secondary"},[t._v(" "+t._s(t.secondaryInfo)+" ")]):t._e(),t.canRetry?s("button",{staticClass:"retry",on:{click:t.retry}},[t._v("Retry")]):t._e()])},i=[],n=s("2b0e"),r=n["a"].extend({props:{errorTitle:{type:String},errorContent:{type:String},iconClass:{type:String},secondaryInfo:{type:String},canRetry:{type:Boolean}},methods:{retry:function(){this.$emit("retry")}}}),o=r,c=(s("3116"),s("2877")),l=Object(c["a"])(o,a,i,!1,null,"01c78318",null);e["a"]=l.exports},da00:function(t,e,s){"use strict";s("2a47")},db8b:function(t,e,s){"use strict";s("c3fc")},ee68:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jobs"},[s("h1",{staticClass:"divided"},[t._v("职业")]),s("a",{attrs:{href:"#scalings"}},[t._v("跳转到职业四维表")]),s("job-tree",{on:{done:t.onTreeLoaded}}),s("h1",{staticClass:"divided",attrs:{id:"scalings"}},[t._v("四维属性")]),t.treeLoaded?s("job-stat-grid"):t._e()],1)},i=[],n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"job-stat-grid"},[t.scalings.loading?s("div",{staticClass:"loading"},[s("loader",{attrs:{"load-text":"正在加载职业四维"}})],1):t._e(),s("div",{staticClass:"grid"},[s("transition",{attrs:{name:"fade"}},[t.groups.length?s("div",{staticClass:"scroll-notice"},[t._v(" 提示：可水平滑动查看 ")]):t._e()]),s("table",t._l(t.groups,(function(e){return s("tbody",{key:e.representative.id},[s("tr",{staticClass:"group-header"},[s("th",{staticClass:"job-name"},[s("sprite-icon",{attrs:{"icon-info":e.representative.icon,"size-override":26}}),s("ui-string",{staticClass:"job-name-text",attrs:{"message-data":e.representative.name,inline:!0}})],1),s("th",[t._v("力量→物攻")]),s("th",[t._v("敏捷→物攻")]),s("th",[t._v("智力→魔攻")]),t.isV0?[s("th",{staticClass:"critdmg"},[t._v("CRITDMG")])]:[s("th",{staticClass:"critdmg"},[t._v("力量→爆伤")]),s("th",{staticClass:"critdmg"},[t._v("敏捷→爆伤")]),s("th",{staticClass:"critdmg"},[t._v("智力→爆伤")])],s("th",[t._v("体质→HP")]),s("th",[t._v("体质→物防")]),s("th",[t._v("智力→魔防")]),s("th",[t._v("敏捷→暴击")])],2),t._l(e.children,(function(e){return s("tr",{key:e.id},[s("th",[s("router-link",{staticClass:"job-name",attrs:{to:{name:"job-view",params:{jobId:e.id}}}},[s("ui-string",{staticClass:"job-name-text",attrs:{"message-data":e.name,inline:!0}}),s("sprite-icon",{attrs:{"icon-info":e.icon,"size-override":18}})],1)],1),e.stats?[s("td",[t._v(t._s(e.stats.strToPhys))]),s("td",[t._v(t._s(e.stats.agiToPhys))]),s("td",[t._v(t._s(e.stats.intToMagic))]),t.isV0?[s("td",{staticClass:"critdmg"},[t._v(t._s(e.stats.strIntToCritDmg))])]:[s("td",{staticClass:"critdmg"},[t._v(t._s(e.stats.strToCritDmg))]),s("td",{staticClass:"critdmg"},[t._v(t._s(e.stats.agiToCritDmg))]),s("td",{staticClass:"critdmg"},[t._v(t._s(e.stats.intToCritDmg))])],s("td",[t._v(t._s(e.stats.vitToHp))]),s("td",[t._v(t._s(e.stats.vitToDef))]),s("td",[t._v(t._s(e.stats.intToMdef))]),s("td",[t._v(t._s(e.stats.agiToCrit))])]:t._e()],2)}))],2)})),0)],1)])},o=[],c=(s("4de4"),s("7db0"),s("4160"),s("d81d"),s("159b"),s("2909")),l=s("b85c"),d=s("bfe8"),u=s("e0b1"),v=s("40a3"),f=s("a1ad"),b=s("3bbf"),h=n["a"].extend({components:{Loader:v["a"],SpriteIcon:f["a"],UiString:b["a"]},data:function(){return{scalings:new d["a"],groups:[],isV0:!0}},mounted:function(){this.fetchData()},computed:{},methods:{fetchData:function(){var t=this;this.scalings.startLoad(),u["a"].getAllJobs().then((function(e){return t.groups=t.categorizeJobsByBase(e),u["a"].getAllJobsScaling()})).then((function(e){var s,a=Object(l["a"])(t.groups);try{for(a.s();!(s=a.n()).done;){var i=s.value;i.children.forEach((function(s){s.stats=t.getScalingForJob(s.id,e)}))}}catch(n){a.e(n)}finally{a.f()}t.scalings.done(e),t.computeIsV0()}))},categorizeJobsByBase:function(t){var e=t.filter((function(t){return 0==t.jobNumber})).map((function(t){return{representative:t,children:[]}}));return e.forEach((function(e){var s,a=e.representative;(s=e.children).push.apply(s,Object(c["a"])(t.filter((function(t){return t.id!=a.id&&t.baseClass==a.baseClass&&2==t.jobNumber})).map((function(t){var e=t;return e.stats=null,e}))))})),e},getScalingForJob:function(t,e){return e.find((function(e){return e.jobId==t}))},computeIsV0:function(){var t=this.groups[0];if(t){var e=t.children[0];if(e&&e.stats)return void(this.isV0=1!==e.stats.scalingVersion)}this.isV0=!0}}}),g=h,_=(s("da00"),s("2877")),p=Object(_["a"])(g,r,o,!1,null,"b6c2a55a",null),m=p.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"job-tree"},[t.jobs.loading?s("div",{staticClass:"loading"},[s("loader",{attrs:{"load-text":"正在加载职业"}})],1):t.classes.length?s("div",{staticClass:"root"},t._l(t.classes,(function(e){return s("div",{key:e.base.id,staticClass:"base class"},[s("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:e.base.id}}}},[s("sprite-icon",{attrs:{"icon-info":e.base.icon}}),s("ui-string",{staticClass:"name",attrs:{"message-data":e.base.name}}),s("div",{staticClass:"jid"},[t._v(t._s(e.base.id))])],1),s("div",{staticClass:"first classes"},t._l(e.firsts,(function(e){return s("div",{key:e.first.id,staticClass:"first class",attrs:{"alt-type":e.first.classType}},[s("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:e.first.id}},"alt-type":e.first.classType,awakened:e.first.hasAwakening}},[s("sprite-icon",{attrs:{"icon-info":e.first.icon}}),s("ui-string",{staticClass:"name",attrs:{"message-data":e.first.name}}),s("div",{staticClass:"jid"},[t._v(t._s(e.first.id))])],1),s("div",{staticClass:"second classes"},t._l(e.seconds,(function(e){return s("div",{key:e.id,staticClass:"second class",attrs:{"alt-type":e.classType}},[s("router-link",{staticClass:"job-header",attrs:{to:{name:"job-view",params:{jobId:e.id}},"alt-type":e.classType,awakened:e.hasAwakening}},[s("sprite-icon",{attrs:{"icon-info":e.icon}}),s("ui-string",{staticClass:"name",attrs:{"message-data":e.name}}),s("div",{staticClass:"jid"},[t._v(t._s(e.id))])],1)],1)})),0)],1)})),0)],1)})),0):t.jobs.error?s("div",{staticClass:"error"},[s("big-error-box",{attrs:{"error-title":"加载职业列表失败","error-content":t.jobs.error,"icon-class":"fa-exclamation-triangle","can-retry":!0},on:{retry:t.fetchData}})],1):t._e()])},C=[],y=s("d741"),k=s("c717"),I=n["a"].extend({components:{BigErrorBox:y["a"],Loader:v["a"],SpriteIcon:f["a"],UiString:b["a"]},data:function(){return{classes:[],jobs:new d["a"]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.jobs.startLoad(),u["a"].getAllJobs().then((function(e){t.classes=t.buildTree(e),t.jobs.done(e),t.$emit("done")}),(function(e){t.jobs.failed(Object(k["a"])(e))}))},buildTree:function(t){var e,s=t.filter((function(t){return 0==t.jobNumber})),a=[],i=Object(l["a"])(s);try{var n=function(){var s,i=e.value,n={base:i,firsts:[]},r=t.filter((function(t){return 1==t.jobNumber&&t.parentJobId==i.id})),o=Object(l["a"])(r);try{var c=function(){var e=s.value,a={first:e,seconds:t.filter((function(t){return 2==t.jobNumber&&t.parentJobId==e.id}))};n.firsts.push(a)};for(o.s();!(s=o.n()).done;)c()}catch(d){o.e(d)}finally{o.f()}a.push(n)};for(i.s();!(e=i.n()).done;)n()}catch(r){i.e(r)}finally{i.f()}return a}}}),w=I,T=(s("2bb7"),Object(_["a"])(w,j,C,!1,null,"9cb90776",null)),x=T.exports,S=n["a"].extend({components:{JobStatGrid:m,JobTree:x},data:function(){return{treeLoaded:!1}},methods:{onTreeLoaded:function(){this.treeLoaded=!0}}}),D=S,O=(s("1819"),Object(_["a"])(D,a,i,!1,null,"f26c53c6",null));e["default"]=O.exports}}]);
//# sourceMappingURL=jobs.3b3ca35a.js.map